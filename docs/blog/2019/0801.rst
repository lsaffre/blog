:date: 2019-08-01

========================
Thursday, August 1, 2019
========================

More optimizations in :term:`getlino`
=====================================

I did some more things for :ticket:`3036`. Changes in lino, startsite and getlino.

- write a supervisor config file for linod
- add new options "front-end" and "languages".
- generate random secret_key and db_password (default value for default_ui on
  new sites)

How to decide whether :manage:`linod` must be installed for a site?  Basic
answer: when the site's env has :mod:`schedule` installed.  But how to see
whether the env has schedule installed?  And actually this is not really true
for sites which use the shared-env. So it's better to add a new site attribute
:attr:`use_linod`

I renamed :manage:`configure` to :manage:`install` because I meanwhile think
that it was a bad idea to use the same name. "configure" implies that it will
ask questions.

- Maybe add a new option server-features with default values "appy monit mysql
  pgsql https redis" instead of having lots of boolean options

- New options mysql and pgsql (the server features). db-engine becomes the
  default value for new sites. Check whether the selected db-engine is available
  on this server

Generate secret_key and db_password.

.. program:: getlino configure

New server options :option:`--db-user` and :option:`--db-password`.  Because
when testing we prefer to reuse the same db user again and again.

HAMZA:

- new option configure --ldap : install an LDAP *server* (a stand-alone server,
  independently of any Lino site)

- ldap-bind, ldap-uri, ... : these parameters will configure new sites to *use*
  LDAP (as a client). Probably using django-auth-ldap. This can also be used
  without --ldap when the LDAP server is somewhere else. NB nginx must also
  protect webdav location using these settings.

LUC:

- the test suite should not only create a site but also test whether the server
  responds. Using cypress?

- adapt the installation instructions in :ref:`book` : use getlino. Move the
  details of installation instructions from book to the getlino docs.

- Should getlino write a bash_aliases config file (either system-wide or per
  user)? --> No, this seems too intrusive.  Rather write some "recommendations
  after installation" in the book.


Kleiderkammer inkl MWSt
=======================

The document generated by :xfile:`aids/Confirmation/clothing_bank.body.html` in
:mod:`lino_welfare.modlib.aids` should mention that all amounts are "VAT
excluded".  I wrote a first suggestion, using an optimization in the
:class:`lino_welfare.modlib.households.RefundsByPerson` table.

Changed some option names in getlino
=====================================

Actually I just want to write a comprehensive installation page for Lino... but
ended up by optimizing some option names:

- projects-root becomes sites-base
- repositories-root becomes repos-base
- backups-root becomes backups-base
