:date: 2020-07-22

========================
Wednesday, July 22, 2020
========================

..
  [Wed Jul 22 00:00:52.896074 2020] [ssl:warn] [pid 6289] AH01909: 127.0.0.1:443:0 server certificate does NOT include an ID which matches the server name
  [Wed Jul 22 00:00:52.902379 2020] [mpm_prefork:notice] [pid 6289] AH00163: Apache/2.4.38 (Debian) OpenSSL/1.1.1d mod_wsgi/4.6.5 Python/3.7 configured -- resuming normal operations
  [Wed Jul 22 00:00:52.902413 2020] [core:notice] [pid 6289] AH00094: Command line: '/usr/sbin/apache2'
  [Wed Jul 22 00:55:51.881459 2020] [cgid:error] [pid 5293] [client 220.167.105.96:59794] AH01264: script not found or unable to stat: /usr/lib/cgi-bin/php
  [Wed Jul 22 00:55:52.406223 2020] [cgid:error] [pid 5293] [client 220.167.105.96:59794] AH01264: script not found or unable to stat: /usr/lib/cgi-bin/php5
  [Wed Jul 22 00:55:53.396000 2020] [cgid:error] [pid 5293] [client 220.167.105.96:59794] AH01264: script not found or unable to stat: /usr/lib/cgi-bin/php-cgi
  [Wed Jul 22 00:55:53.664350 2020] [cgid:error] [pid 5293] [client 220.167.105.96:59794] AH01264: script not found or unable to stat: /usr/lib/cgi-bin/php.cgi
  [Wed Jul 22 00:55:53.925975 2020] [cgid:error] [pid 5293] [client 220.167.105.96:59794] AH01264: script not found or unable to stat: /usr/lib/cgi-bin/php4
  [Wed Jul 22 00:58:08.975293 2020] [wsgi:error] [pid 4847] There is no current event loop in thread 'Dummy-1'.
  [Wed Jul 22 00:58:08.975417 2020] [wsgi:error] [pid 4847] Wsgi application is not yet ready
  [Wed Jul 22 00:58:08.975836 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:62327] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:08.976195 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:51787] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:08.976472 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:50739] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:08.976764 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:65309] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:08.977050 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:55558] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:08.977304 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:58916] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:15.273248 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:56278] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:15.274878 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:54517] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:15.285956 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:55224] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:15.291712 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:59272] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:15.292900 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:55317] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:15.295236 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:54870] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:17.996603 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:53070] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:18.002048 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:55355] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:18.007526 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:52548] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:18.020764 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:49491] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:18.021398 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:51312] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:18.026019 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:53379] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:19.824566 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:52241] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.
  [Wed Jul 22 00:58:20.110938 2020] [wsgi:error] [pid 4847] [remote 176.46.90.31:64903] mod_wsgi (pid=4847): Target WSGI script '/usr/local/python/lino_sites/hobbit/apache/wsgi.py' does not contain WSGI application 'application'.

Ismail still having problems
============================

Ismail reported more problems with installing his :term:`developer environment`.
I manually tested the installation instructions and discovered (and fixed) more
problems. Ismail stumbles into these problems because we do not yet have an
automated test case for the installation instructions at
:ref:`lino.dev.install`.

- must release lino 20.7.6 after rstgen
- rstgen had a packaging error. rstgen 20.7.1
- move atelier.utils to rstgen.utils : atelier 1.1.27, rstgen 20.7.2
- weasyprint didn't declare imagesize dependency : lino 20.7.7
- fix import utils from rstgen instead of atelier lino 20.7.8
- fix more import utils from rstgen instead of atelier
- fix no user nathalie during prep
- release lino 20.7.9 to pypi
- release avanti 20.7.3 to pypi
- lino_noi did "from atelier.sphinxconf.base import py2url_txt".
  must move py2url_txt to rstgen.utils.
- TODO: release to pypi atelier, rstgen and noi

NB:

- When everything works but you get a blank page: check your browser's developer
  console. When static dir is not being served by runserver, this may come
  because DEBUG is not set to False




More manual testing on the weleup preview
=========================================

As yesterday, it was the file
:file:`lino_welfare/modlib/welfare/config/excerpts/Default.odt`
(the :xfile:`excerpts/Default.odt` in the
:mod:`lino_welfare.modlib.excerpts` plugin).
This appy template uses a frame to define the left margin
The width of that frame was now *40,99mm*
and the padding left and right were *2,8mm*. I changed them to *42mm* and *1,5mm*.
Also the user's email address was now being printed, but not in their old version.

Also the vertical spacing between `OurRef` and `Heading 1` was now much smaller.
I decided to fix this by making the optional heading "(Translation)" appear with
empty content also when the document is not a translation.  This happens in
:file:`lino_welfare/modlib/aids/config/aids/Confirmation/certificate.body.html`.

As to *why* these side effects occur: Did I "optimize" these
templates a some moment when preparing a demo for a potential customer?
No, because the git history shows that i haven't modified the file since
`2018-09-28 <https://luc.lino-framework.org/blog/2018/0928.html>`__.

My next explanation is that LibreOffice has changed how it reads certain
properties.


Getting tests to pass on Travis
===============================

I think I got the :file:`welfare/docs/specs/misc.rst` failure. It was caused by
the following bug in :meth:`lino.utils.config.ConfigDirCache.scan_config_dirs`.
When :envvar:`LINO_CACHE_ROOT` is used, the local_pth is not among the settings
subdirs. But if it exists, Lino must find it. (This feature is not actually
being used at the moment, but who knows.)

I released rstgen, lino and lino_xl to PyPI.
