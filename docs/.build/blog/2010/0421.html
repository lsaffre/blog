<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="22.04.2010" href="0422.html" />
    <link rel="prev" title="14.-16.04.2010" href="0414.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0422.html" title="22.04.2010"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0414.html" title="14.-16.04.2010"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>= [20100414 ←] [20100421 17.-21.04.2010] [20100422 →] =</p>
<p>Die Umstellung auf RESTful ist überraschend aufwändig, und das frustriert
mich. Es lohnt sich auch nicht, darüber viel zu schreiben, weil es echt
Schlammschipperei ist. Trotzdem bin ich motiviert und hoffe, dass das
bald wieder vorbei ist.</p>
<p>20.04. abends:</p>
<p>Uff: die neue URL-Struktur scheint jetzt ([<a class="reference external" href="http://code.google.com/p/lino/source/detail?r=753a477a2a0f64b1a463ee57a990886aadd51fb2">http://code.google.com/p/lino/source/detail?r=753a477a2a0f64b1a463ee57a990886aadd51fb2</a> revision 753a477a2a]) im Großen und Ganzen zu funktionieren. Einiges an Kleinarbeiten ist noch zu tun, bevor die Funktionalität von vor der großen Lawine wieder hergestellt ist...</p>
<p>21.04.</p>
<p>Zuerst in der lino.js : die Verwaltung von Slave-Fenstern macht noch gelegentliche JS-Fehlermeldungen. Außerdem wird die PDF-Action noch nicht ausgelöst. Die <cite>success</cite>-Funktion in <cite>WindowWrapper.setup_child</cite> und <cite>Lino.do_action</cite> sind teilweise doppelt gemoppelt.</p>
<p>Es gibt Toggle-Slave-Fenster und einfache Slave-Fenster. Erstere müssen den Toggle-Button in ihrem Master kennen, um ihn wieder einschalten zu können, wenn sie durch ihr eigenes close-Tool geschlossen werden. Insert wird ein einfaches Slave-Fenster ohne Toggle sein. Der Master soll alle seine Slaves (auch die nicht toggelnden?) schließen, wenn er geschlossen wird.</p>
<p>Ich kann es auch einfacher machen: ein Insert-Fenster wird nicht geschlossen, wenn der Master geschlossen wird. Dann wären alle Slaves automatisch Toggle-Fenster (d.h. Detail, GridSlaves und Properties).</p>
<p>PDF ist keine Aktion, die ein (Unter-)Fenster öffnet, sondern sie macht ein Redirect zur URL, unter der die pdf-Datei steht (je nach Browsereinstellung bedeutet das ein neues Browser-Fenster oder ein Dialog zum Runterladen der Datei).</p>
<p>Delete sollte je nach Konfiguration des Reports entweder vorher bestätigen oder nicht. Also beim Klicken des Buttons sollte ein Ajax-Request <cite>GET /contactsz/Persons/delete.act</cite> rausgehen, der z.B. folgendes zurück gibt:</p>
<div class="highlight-python"><div class="highlight"><pre>function(caller) {
  if Ext.confirm(&quot;Are you sure?&quot;) {
    Lino.do_action(caller,
      &#39;DELETE&#39;,&#39;/api/contacts/Persons&#39;,{selection=caller.get_selected()}
    )
  }
}
</pre></div>
</div>
<p>Momentan gibt z.B. <cite>/api/contacts/Persons/projects.act</cite> folgendes zurück:</p>
<div class="highlight-python"><div class="highlight"><pre>{
  success: true, ...
  open_window: function(caller) { return new Lino.GridSlaveWrapper(caller,{...});}
}
</pre></div>
</div>
<p>Und <cite>Lino.do_action</cite> bzw. <cite>setup_child</cite> machen:</p>
<div class="highlight-python"><div class="highlight"><pre>if (result.show_window) {
  var ww = result.show_window(caller);
  ww.show();
}
</pre></div>
</div>
<p>Das ist ziemlicher Quatsch. Transparenter wäre ein System im Stil:</p>
<div class="highlight-python"><div class="highlight"><pre>{
  success: true, ...
  js_code: function(caller) {
    caller.show_slave(&#39;projects&#39;,new Lino.GridSlaveWrapper(caller,{...}));}
}
</pre></div>
</div>
<p>und in <cite>Lino.do_action</cite> bzw. <cite>setup_child</cite> dann einfach:</p>
<div class="highlight-python"><div class="highlight"><pre>if (result.js_code) result.js_code(caller);
</pre></div>
</div>
<p><cite>js_code</cite> ist einfach eine Funktion, die mit einem einzigen Parameter &#8216;caller&#8217; aufgerufen wird. Ein <cite>GridSlaveWrapper</cite> kann dann natürlich nicht funktionieren wenn es vom Hauptmenü aus gestartet wird (wo der caller <cite>undefined</cite> ist).</p>
<p>Wichtig ist zu bedenken, dass <cite>/api/contacts/Persons/projects.act</cite> natürlich nur einmal aufgerufen werden muss. Deshalb ist <cite>Lino.toggle_button_handler</cite> da. Der schaut momentan nach, ob der Master-WindowWrapper schon ein Attribut namens &#8216;projects&#8217; hat. Wenn ja, dann ist das nämlich der zuvor generierte GridSlaveWrapper, der inzwischen geschlossen (d.h. versteckt) worden war und lediglich ein <cite>show()</cite> angefragt kriegt.</p>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0422.html" title="22.04.2010"
             >next</a> |</li>
        <li class="right" >
          <a href="0414.html" title="14.-16.04.2010"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2010/0421.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2010/0421.html">Online Link</a>
    </div>
  </body>
</html>