<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20101013 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="20101014" href="1014.html" />
    <link rel="prev" title="20101012" href="1012.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1014.html" title="20101014"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1012.html" title="20101012"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20101013<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="makemessages-fur-den-lino-kernel">
<h2>makemessages für den Lino-Kernel<a class="headerlink" href="#makemessages-fur-den-lino-kernel" title="Permalink to this headline">¶</a></h2>
<p>Tilt! Ich habe verstanden, wie ich das folgende Problem lösen muss:</p>
<ul class="simple">
<li>Strings aus <code class="xref py py-data docutils literal"><span class="pre">lino.modlib.fields.KNOWLEDGE_CHOICES</span></code> werden von <strong class="command">django-admin makemessages</strong> nicht gefunden,
weil sie Teil des &#8220;Lino-Kernels&#8221; und keine direkte Django application sind.
Ebenso <code class="xref py py-mod docutils literal"><span class="pre">lino.ui.extjs.ext_ui</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">lino.actions</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">lino.reports</span></code>, ...
Rausfinden, ob man das nicht doch irgendwie automatisieren kann.
Der Anfang ist gemacht in <a class="reference external" href="https://github.com/lsaffre/lino/blob/master//Makefile">/Makefile</a>.
Siehe auch:
<a class="reference external" href="http://code.google.com/p/lino/source/browse/docs/blog/2010/1008.rst">2010-10-08</a>,
<a class="reference external" href="http://www.lino-framework.org/topics/i18n.html">/topics/i18n</a></li>
</ul>
<p>Ich muss einfach dafür sorgen, dass der &#8220;Lino-Kernel&#8221; inner- bzw. unterhalb von <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.system.html#module-lino.modlib.system" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.system</span></code></a> steht. Weil <cite>makemessages</cite> ja in den Verzeichnissen unterhalb jeder Django-Anwendung automatisch sucht.</p>
<p>Dazu gibt es zwei Wege: Aufteilen oder Zusammenfügen</p>
<ol class="arabic simple">
<li>Aufteilen</li>
</ol>
<p>Ein Weg wäre, dass ich <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.html#module-lino.modlib" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.modlib</span></code></a> auslagere in ein neues Google-Projekt &#8220;lino-modlib&#8221; (oder &#8220;lino-contrib&#8221; oder &#8220;lino-apps&#8221;) mache. Nur das bisherige <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.system.html#module-lino.modlib.system" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.system</span></code></a> bleibt im Hauptprojekt und kommt dabei nach <a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino</span></code></a>.</p>
<p>Also wenn <a class="reference external" href="http://www.lino-framework.org/ref/settings.html#setting-INSTALLED_APPS" title="(in Lino v1.6)"><code class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></code></a> bisher so aussieht:</p>
<div class="highlight-python"><div class="highlight"><pre>INSTALLED_APPS = (
  &#39;django.contrib.auth&#39;,
  ...
  &#39;lino.modlib.system&#39;,
  &#39;lino.modlib.countries&#39;,
  ...
  &#39;dsbe&#39;,
  &#39;south&#39;,
)
</pre></div>
</div>
<p>dann sähe sie nachher so aus:</p>
<div class="highlight-python"><div class="highlight"><pre>INSTALLED_APPS = (
  &#39;django.contrib.auth&#39;,
  ...
  &#39;lino&#39;,
  &#39;lino_apps.countries&#39;,
  ...
  &#39;dsbe&#39;,
  &#39;south&#39;,
)
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Zusammenfügen</li>
</ol>
<p>Ein Grund, der gegen Spaltung spricht ist die Tatsache, dass das für mich unnötiger Mehraufwand ist,
solange ich der einzige Mensch bin, der an Lino arbeitet.
Wenn ich diesen Weg wähle, wäre es logisch, dass lino-dsbe ebenfalls in die lino.modlib kommt.
Die beiden Versionsnummern bei jedem Release gehen mir nämlich mittlerweile auf den Keks.</p>
<p>Wenn ich die lino.modlib <em>nicht</em> auslagern will, kann ich aber dummerweise
in <a class="reference external" href="http://www.lino-framework.org/ref/settings.html#setting-INSTALLED_APPS" title="(in Lino v1.6)"><code class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></code></a> nicht einfach nur <code class="docutils literal"><span class="pre">lino</span></code> reintun (weil makemessages
sonst für die Django-Anwendung <cite>lino</cite> auch die Meldungen aus der lino.modlib
extrahieren würde), sondern alles was bisher unter <cite>lino</cite> steht (auch <cite>lino.ui</cite>)
muss nach <cite>lino.core</cite> oder <cite>lino.base</cite> oder <cite>lino.main</cite> kommen.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Package</th>
<th class="head">purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>lino.main</td>
<td>include this in your INSTALLED_APPS</td>
</tr>
<tr class="row-odd"><td>lino.tools</td>
<td>modules that might be usable without lino</td>
</tr>
<tr class="row-even"><td>lino.demo</td>
<td>example of a complete Lino site (&#8220;Django project&#8221;)</td>
</tr>
<tr class="row-odd"><td>lino.test_apps</td>
<td>test cases for unit testing</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Also Alternative ohne Auslagerung:</p>
<div class="highlight-python"><div class="highlight"><pre>INSTALLED_APPS = (
  &#39;django.contrib.auth&#39;,
  ...
  &#39;lino.main&#39;,
  &#39;lino.modlib.countries&#39;,
  ...
  &#39;dsbe&#39;,
  &#39;south&#39;,
)
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Beides</li>
</ol>
<p>Da fällt mir auf: makemessages hat doch eine Option <cite>&#8211;ignore</cite>! Also kann ich folgendes machen:</p>
<div class="highlight-python"><div class="highlight"><pre>INSTALLED_APPS = (
  &#39;django.contrib.auth&#39;,
  ...
  &#39;lino&#39;,
  &#39;lino.modlib.countries&#39;,
  ...
  &#39;dsbe&#39;,
  &#39;south&#39;,
)
</pre></div>
</div>
<p>Da habe ich die Vorteile beider Lösungen in Einem:
in <a class="reference external" href="http://www.lino-framework.org/ref/settings.html#setting-INSTALLED_APPS" title="(in Lino v1.6)"><code class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></code></a> kann einfach nur <code class="docutils literal"><span class="pre">lino</span></code> stehen,
und die lino.modlib braucht nicht in ein neues Codeprojekt ausgelagert zu werden.</p>
<p>Das sind freilich trotzdem einige Module und Verzeichnisse, die sich verschieben:</p>
<div class="highlight-python"><div class="highlight"><pre>lino.modlib.fields -&gt; lino.fields
lino.modlib.tools -&gt; lino.tools
lino.modlib.fixtures -&gt; lino.fixtures
lino.modlib.management -&gt; lino.management
</pre></div>
</div>
<p>Daneben natürlich Änderungen in der <a class="reference external" href="https://github.com/lsaffre/lino/blob/master//Makefile">/Makefile</a>.</p>
<p>Die Umstrukturierung an sich war nur eine halbe Stunde Arbeit.
Python ist super!</p>
<p>Resultat : <code class="docutils literal"><span class="pre">make</span> <span class="pre">mm</span></code> findet jetzt alle Meldungen, die übersetzt werden müssen.
(Außer natürlich die Meldungen im JS-Code. Die sind ein anderes Kapitel, das kommt später mal.)</p>
</div>
<div class="section" id="aus-notizen-werden-dokumente-links-und-termine">
<h2>Aus &#8220;Notizen&#8221; werden &#8220;Dokumente&#8221;, &#8220;Links&#8221; und &#8220;Termine&#8221;<a class="headerlink" href="#aus-notizen-werden-dokumente-links-und-termine" title="Permalink to this headline">¶</a></h2>
<p>Und ich habe jetzt eine Vorstellung, die ich die folgenden drei Punkte angehen werde:</p>
<ul class="simple">
<li>NotesByPerson im Detail-Fenster einer Person sollte nur die wichtigen Ereignisse anzeigen
(deren <code class="xref py py-attr docutils literal"><span class="pre">notes.NoteType.important</span></code> eingeschaltet ist).</li>
<li>Vielleicht auch eine grundlegendere Vorgehensweise:
&#8220;Notizen&#8221; aufteilen in &#8220;Dokumente&#8221; und &#8220;Dienstleistungen&#8221;.
Dienstleistungen halten fest, wann ein Mitarbeiter (Benutzer) für eine Person gearbeitet hat.</li>
<li>Lokale Dateinamen benutzerfreundlich als Notiz erfassen.
Eventuell neues Feld <cite>attached_file</cite> statt <cite>url</cite>?
Eine URL kann man jetzt schon durch DnD der Adresse vom Browserfenster in ein Textfeld kopieren.</li>
</ul>
<p>Die Wurzel des Übels ist, dass die Tabelle &#8220;Notizen&#8221; ein bisschen zu viele Dinge in den gleichen Topf wirft.</p>
<ul>
<li><p class="first">&#8220;Dokumente&#8221; sind .odt-Dateien, die Lino generiert hat,
und die oft vom Benutzer noch manuell bearbeitet worden sind.
Ziel ist es, dass die Benutzer von Lino aus OpenOffice auf dem Dokument starten, darin arbeiten und es
dann abspeichern&#8212; all das ohne sich um Dateinamen und -ordner kümmern zu müssen.</p>
<p>Pro Dokument speichert Lino, ob und wenn ja wann es &#8220;ausgeliefert&#8221; wurde.
Ein ausgeliefertes Dokument sollte ja normalerweise nicht mehr bearbeitet werden.</p>
<p>Die Liste der Dokumentarten bleibt ungefähr gleich, außer dass
Dokumentarten wie &#8220;Externes Dokument&#8221; da rausfliegen.</p>
</li>
<li><p class="first">&#8220;Links&#8221; sind Verweise zu externen Dokumenten.
Im DSBE werden das vor allem .pdf-Dateien mit dem Bild eines eingescannten externen Dokuments sein.
Vielleicht kommt noch eine neue Tabelle &#8220;Link-Arten&#8221; mit Einträgen im Stil:</p>
<ul class="simple">
<li>Aufenthaltserlaubnis</li>
<li>Arbeitserlaubnis</li>
<li>Personalausweis</li>
<li>Vertrag</li>
<li>Sonstige</li>
</ul>
</li>
<li><p class="first">&#8220;Termine&#8221; würden im DSBE zunächst nur benutzt, um sich von Lino Erinnerungen schicken zu lassen.
Termin-Arten wären z.B. &#8220;Gültigkeit eines externen Dokuments läuft ab&#8221;.
Allerdings müsste mir noch was einfallen, wie die Erstellung
von Terminen möglichst automatisch vonstatten gehen soll.
Statt dieser Tabelle könnte ich auch lediglich in den Links ein Datumsfeld <cite>reminder</cite> definieren.
Wenn das ausgefüllt ist, kriegt der Benutzer an diesem Tag eine E-Mail geschickt. Das wäre die einfachste Lösung. Aber mit einer eigenen Tabelle von Terminen wäre die Sache flexibler und weitsichtiger.</p>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1014.html" title="20101014"
             >next</a> |</li>
        <li class="right" >
          <a href="1012.html" title="20101012"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2010/1013.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2010/1013.html">Online Link</a>
    </div>
  </body>
</html>