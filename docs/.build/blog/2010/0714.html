<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20100714 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="20100715" href="0715.html" />
    <link rel="prev" title="20100713" href="0713.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0715.html" title="20100715"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0713.html" title="20100713"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20100714<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Das System für die Permalinks von <a class="reference internal" href="0713.html"><em>gestern</em></a> habe ich nochmal grundlegend revidiert.
Permalinks sind jetzt &#8220;normale&#8221; URIs. Und zwar genau die, die ich für extjsu ausgedacht hatte:</p>
<div class="highlight-python"><div class="highlight"><pre>http://127.0.0.1:8000/api/contacts/Persons?fmt=grid
http://127.0.0.1:8000/api/contacts/Companies?fmt=insert
http://127.0.0.1:8000/api/contacts/Persons/200076?fmt=detail
</pre></div>
</div>
<p>Der wichtige Unterschied zum extjsu ist freilich, dass diese URIs einen Aufruf der entsprechenden JS-Funktion in die <code class="xref js js-func docutils literal"><span class="pre">Ext.onReady()</span></code> hinein generieren. Den gleichen Aufruf, den auch ein entsprechender Button als Handler hat. Das ist super! Ich bin erstmals richtig zufrieden.</p>
<p>Ach ja, die <cite>extjsw.USE_WINDOWS</cite> ist raus, also diese Entscheidung ist gefallen.
Diese Tür weiter offen zu halten hätte wenig Sinn.</p>
<p>Es gibt trotzdem noch den <code class="xref js js-class docutils literal"><span class="pre">WindowWrapper()</span></code>. Der erzeugt ein Panel, das die Tools-Buttons und den Fenstertitel enthält, und dessen einziges Item ein <a class="reference external" href="http://www.lino-framework.org/ref/javascript.html#Lino.GridPanel" title="(in Lino v1.6)"><code class="xref js js-class docutils literal"><span class="pre">Lino.GridPanel()</span></code></a> oder <a class="reference external" href="http://www.lino-framework.org/ref/javascript.html#Lino.FormPanel" title="(in Lino v1.6)"><code class="xref js js-class docutils literal"><span class="pre">Lino.FormPanel()</span></code></a> ist. Momentan herrscht noch ziemliches Chaos darüber, was in WindowWrapper und was in dessen main_item gespeichert wird.
Zum Beispiel <cite>ls_data_url</cite> und <cite>bbar_actions</cite> : die sind im GridPanel und im FormPanel, nicht im WindowWrapper. Der Unterschied wird wichtig, wenn man in einem DetailWrapper mehrere GridElements hat. <cite>load_master_record()</cite> machen beide: der DetailWrapper holt sich seinen Titel, das FormPanel füllt seine Felder. current_record und get_current_record() kommen in den WindowWrapper. Die MainPanels haben ihren ww nicht zu kennen.</p>
<p>Checkin wegen Feierabend.</p>
<p>TODO:</p>
<ul class="simple">
<li>Passfotos werden nicht angezeigt. Das PictureElement wird scheinbar korrekt generiert, aber
<a class="reference external" href="http://127.0.0.1:8000/api/contacts/Persons/200076?fmt=picture">http://127.0.0.1:8000/api/contacts/Persons/200076?fmt=picture</a>
macht <code class="docutils literal"><span class="pre">NotImplementedError:</span> <span class="pre">&lt;Person:</span> <span class="pre">Saffre</span> <span class="pre">Mari&gt;</span> <span class="pre">action</span> <span class="pre">u'picture'</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">implemented)</span></code></li>
<li>Close-Buttons. Im Prinzip soll er beim Schließen eines Fensters das vorherige Fenster anzeigen. Aber sollen alle offenen Fenster &#8220;erhalten&#8221; bleiben? das ist erstens Speicherverschwendung und zweitens vielleicht nicht leicht zu implementieren (weil die &#8220;Fenster&#8221; ja keine Windows sind sondern einfach Panels, die in die main_area injiziert werden). Besser also nur den entsprechende Funktionsaufruf speichern. Sonderfall ist das Hauptfenster, das keinen Close-Button haben soll. Interner Sonderfall ist, wenn man über einen Permalink startet: wenn das über den PL geöffnete Fenster geschlossen wird, kommt man ins Hauptmenü. Das Hauptmenü ist in Lino (im Gegensatz zu TIM) ja immer da. Also wenn man einen Befehl des HM startet, sollte die zuvorige Fensterhistorik auch gelöscht werden.</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0715.html" title="20100715"
             >next</a> |</li>
        <li class="right" >
          <a href="0713.html" title="20100713"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2010/0714.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2010/0714.html">Online Link</a>
    </div>
  </body>
</html>