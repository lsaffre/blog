<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="26.02.2010" href="0226.html" />
    <link rel="prev" title="23.02.2010" href="0223.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0226.html" title="26.02.2010"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0223.html" title="23.02.2010"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>= [20100223 ←] [20100225 25.02.2010] [20100226 →] =</p>
<p>Kommen wir zum Speichern von Properties. Außerdem sehe ich, dass er momentan nur die gesetzten Eigenschaften anzeigt, aber ich will ja immer alle sehen. Auch macht er momentan selbst dann für jeden Record einen Request, wenn der Ei-Editor gar nicht geöffnet ist. Ich muss also das Laden der Eigenschaften nicht nur als row_listener der main_grid machen, sondern auch beim Öffnen des Fensters.</p>
<p>Und es wird wohl auch noch einen Report ChoicesByProperty geben müssen, mit dem man die Auswahlmöglichkeiten einer Eigenschaften sehen und bearbeiten kann.</p>
<p>Das Speichern im Ei-Editor kann noch nicht funktionieren, weil mt und mk nicht übergeben werden. Die werden doch in <cite>Lino.load_master()</cite> gesetzt. Aber der ist an den Store gebunden, und einen Store hat ein Report ohne <cite>use_layouts</cite> ja nicht. Einen Store braucht die PropertyGrid ja auch nicht, weil die für jeden Record einen neuen Request macht.</p>
<p>Das Laden ist also jetzt ausgelagert in die globale Funktion <cite>Lino.load_properties(caller,url,record)</cite>.
Die unterlässt den Request jetzt, wenn das Fenster hidden ist.
Und wird deshalb nun auch im show-Event des properties_window aufgerufen.</p>
<p>Eine Ext.PropertyGrid hat keinen normalen Store, deshalb kann ich <cite>Lino.grid_afteredit()</cite> nicht für den Ei-Editor benutzen.
Also eine neue globale Funktion <cite>Lino.submit_property(caller,e)</cite>.</p>
<p>Dann noch der <cite>submit_property_view(self,request)</cite>. Der ist für alle property-Fenster die gleiche URL und braucht nur vier Parameter owner_type, owner_id, name, und value.
Soll ich hier wirklich einen ReportRequest instanzieren, nur um mk und mt in die master_instance zu konvertieren? Zumal BaseViewReportRequest dann noch verändert werden müsste, damit er auch mit einem POST-Request funktioniert. Ich könnte stattdessen auch die Logik aus <cite>BaseViewReportRequest.parse_kw()</cite> auslagern und die ganze Idee mit den Reports ohne Layout wieder verwerfen. Dann käme PropValuesByOwner und <cite>use_layouts</cite> wieder raus.</p>
<p>Hm... jetzt zuerst mal Mittagspause...</p>
<p>Also Ausklinken oder nicht? Ist PropValuesByOwner nützlich oder nicht?</p>
<p>Ich könnte in <cite>parse_kw()</cite> natürlich <cite>request.REQUEST</cite> abfragen statt GET oder POST, aber die [<a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/request-response">http://docs.djangoproject.com/en/dev/ref/request-response</a> Django-Doku] sagt &#8220;It&#8217;s strongly suggested that you use GET and POST instead of REQUEST, because the former are more explicit.&#8221;</p>
<p>Die Frage ist nicht definitiv beantwortet, aber die einfachste bzw. zukunftsweisendste Implementierung scheint mir ohne Ausklinken. <cite>parse_kw()</cite> fragt nun entgegen des Rates der Django-Doku <cite>request.REQUEST</cite> ab (tant pis).</p>
<p>Noch Tests und einige Kleinigkeiten, und schon ist wieder Feierabend :-(</p>
<p>Morgen muss ich noch die Fenstergröße des Ei-Editor speichern (und wahrscheinlich dann auch in einem die Kolonnenbreiten usw).</p>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0226.html" title="26.02.2010"
             >next</a> |</li>
        <li class="right" >
          <a href="0223.html" title="23.02.2010"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2010/0225.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2010/0225.html">Online Link</a>
    </div>
  </body>
</html>