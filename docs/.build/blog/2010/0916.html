<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2010-09-16 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="2010-09-17" href="0917.html" />
    <link rel="prev" title="2010-09-15" href="0915.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0917.html" title="2010-09-17"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0915.html" title="2010-09-15"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>2010-09-16<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Die Idee von <a class="reference internal" href="0915.html"><em>gestern</em></a> (Slave-Reports als Kolonne einer Grid) ist Quatsch.
Statt im Slave-Report eine <cite>as_string</cite> zu schreiben, kann ich doch einfach
ein virtuelles Feld im Master machen.</p>
<p>Also z.B. in Person:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">language_knowledges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">kn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">languageknowledge_set</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">kn</span><span class="o">.</span><span class="n">spoken</span> <span class="o">&gt;</span> <span class="s">&#39;1&#39;</span> <span class="ow">and</span> <span class="n">kn</span><span class="o">.</span><span class="n">written</span> <span class="o">&gt;</span> <span class="s">&#39;1&#39;</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">u&quot;</span><span class="si">%s</span><span class="s"> (s/w)&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">kn</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">kn</span><span class="o">.</span><span class="n">spoken</span> <span class="o">&gt;</span> <span class="s">&#39;1&#39;</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">u&quot;</span><span class="si">%s</span><span class="s"> (s)&quot;</span><span class="p">)</span><span class="o">%</span> <span class="n">kn</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">kn</span><span class="o">.</span><span class="n">written</span> <span class="o">&gt;</span> <span class="s">&#39;1&#39;</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">u&quot;</span><span class="si">%s</span><span class="s"> (w)&quot;</span><span class="p">)</span><span class="o">%</span> <span class="n">kn</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
    <span class="k">return</span> <span class="s">u&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</pre></div>
</div>
<p>In der Grid erlaubte er, dass man virtuelle Felder bearbeitet. Behoben.</p>
<p>Release in Eupen: <a class="reference external" href="http://www.lino-framework.org/releases/2010/0916.html">/releases/2010/0916</a>.</p>
<div class="section" id="watch-tim">
<h2>watch_tim<a class="headerlink" href="#watch-tim" title="Permalink to this headline">¶</a></h2>
<p>Aha, ich dachte mir schon, dass ich was falsch mache beim Start von watch_tim:
<a class="reference external" href="http://www.linuxquestions.org/questions/linux-newbie-8/put-a-process-in-background-and-logout-261399/">http://www.linuxquestions.org/questions/linux-newbie-8/put-a-process-in-background-and-logout-261399/</a></p>
</div>
<div class="section" id="make-staff">
<h2>make_staff<a class="headerlink" href="#make-staff" title="Permalink to this headline">¶</a></h2>
<p><cite>make_staff</cite> ist jetzt ebenfalls ein management command (<code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.system.management.commands.make_staff</span></code>).
Das Ding ist freilich weiterhin primitiv und wird sich im Laufe der Zeit wohl noch stark ändern.
Vielleicht wird es sich aber auch als unnütz erweisen. Jedenfalls ist die einzige Funktion momentan,
dass man ausgewählten Benutzern ihr <cite>is_staff</cite> setzen kann.</p>
</div>
<div class="section" id="lino-do-when-visible-funktioniert-nicht">
<h2><code class="xref js js-func docutils literal"><span class="pre">Lino.do_when_visible()</span></code> funktioniert nicht<a class="headerlink" href="#lino-do-when-visible-funktioniert-nicht" title="Permalink to this headline">¶</a></h2>
<p>Jetzt nehmen wir uns mal folgendes Problem vor:</p>
<blockquote>
<div>Beim Öffnen eines Detail-Fensters sind die Slave-Grids anfangs nicht richtig mit ihrem Master verknüpft.
Erst nach PgUp oder PgDn kommen sie richtig.&#8221;</div></blockquote>
<p>Das kommt immer, wenn Lino.DetailWrapper mit einem data_record gerufen wird. Also z.B. über permalink.
Dann ruft er load_master_record auf, der auch wie es sein muss Lino.do_when_visible ruft
(mit load_picture bei Bildern bzw. setBaseParams bei Slavegrids), aber weil das Bild bzw. die Grid in diesem Moment
noch nicht isVisible ist, muss Lino.do_when_visible einen deferred call machen.
Aber die werden nie aufgerufen.
Also Lino.do_when_visible funktioniert nicht.
Er hängt die todo entweder ans <cite>render</cite>-Event oder ans <cite>show</cite>-Event.
Wie kann es kommen, dass <cite>cmp.rendered</cite> und nicht <cite>cmp.hidden</cite> ist, aber <cite>cmp.isVisible()</cite> trotzdem <cite>false</cite> zurück gibt?</p>
<p>Puh! Nach über 6 Stunden Sucherei habe ich jetzt immerhin ein Post mit einem Showcase ans ExtJS-Forum schicken können:
<a class="reference external" href="http://www.sencha.com/forum/showthread.php?110043-Grid-is-rendered-but-not-visible">Grid is rendered but not visible</a>
Wobei das Showcase, das ich geschrieben habe, leider perfekt funktioniert und folglich mein Problem nicht einmal reproduziert.
Also in einem ersten Schritt hoffe ich lediglich auf Ideen, wie ich den Fehler reproduziert bekommen könnte...</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0917.html" title="2010-09-17"
             >next</a> |</li>
        <li class="right" >
          <a href="0915.html" title="2010-09-15"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2010/0916.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2010/0916.html">Online Link</a>
    </div>
  </body>
</html>