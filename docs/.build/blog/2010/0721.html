<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20100721 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="20100722" href="0722.html" />
    <link rel="prev" title="Famous Software Award" href="0717.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0722.html" title="20100722"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0717.html" title="Famous Software Award"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20100721<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>22.45 Uhr. Diese Woche werde ich nicht viel Zeit für Lino haben, aber hier zwischendurch ein paar Gedanken.</p>
<p>Also beim Implementieren von Previous/Next-Buttons im Detail-Fenster gibt es noch was zu Meditieren. Ich stehe vor der Entscheidung, ob ich im URI für einzelne Records eines Reports (1) den Primary Key oder (2) den Offset nehmen soll (also das &#8220;123&#8221; in einem URI <cite>contacts/Persons/123</cite>). Momentan ist es der PK. Aber zum Blättern wäre der Offset effizienter implementierbar. Zumindest fürchte ich, dass der Algorithmus von <a class="reference internal" href="0716.html"><em>vergangenem Freitag</em></a> in Reports mit vielen Zeilen nicht tragbar ist.</p>
<p>Andererseits müsste ich bei Adressierung per Offset zunächst ein Mittel finden um zu verhindern, dass der Benutzer nach einem Submit in einem Detail-Fenster plötzlich einen ganz anderen Record angezeigt bekommt (weil inzwischen alle Offsets verschoben sind weil ein anderer Benutzer einen neuen Record erstellt hat).</p>
<p>Also Adressierung per Offset scheint keine Zukunft zu haben.</p>
<p>Vielleicht findet sich ja mal ein besserer Algorithmus zum Ermitteln des vorigen und nächsten Records, wenn ein einzelner Record per PK angefragt wurde. Also Frage an die SQL-Experten: Wie kriege ich (ohne alle Records abzurufen) den Offset, wenn ich nur den PK kenne? Zum Beispiel führt der Report <cite>contacts.Persons</cite>  (vereinfacht) zu einem SQL-Query <cite>SELECT * from Persons ORDER BY name</cite>. Ein einzelnes Element kriege ich mit
<cite>SELECT * from Persons ORDER BY name where id = 123</cite>. Wenn ich den Offset kennte (sagen wir mal er sei 25, könnte ich anschließend mit zwei einfachen <cite>SELECT * from Persons ORDER BY name offset 24 limit 1</cite> und <cite>SELECT * from Persons ORDER BY name offset 26 limit 1</cite> den vorigen und nächsten Record abfragen. Aber die Frage ist: wie finde ich raus, dass ein Person mit id = 123 der 25. Record ist?</p>
<p>Ich könnte auch festlegen, dass Detail-Fenster von Reports mit über 200 Zeilen keine Previous/Next-Buttons haben.</p>
<p>Ich könnte das auch pro Report konfigurierbar machen: Report.show_prev_next.</p>
<p>24.10 Uhr : Wow, eigentlich wollte ich die Ideen nur schnell aufschreiben, aber dann konnte ich es nicht lassen und habe begonnen sie zu implementieren. Erste Erfolgserlebnisse. Check-In.</p>
<p>TODO:</p>
<ul class="simple">
<li>er skippt nur bis zum 10. Record (also der ar in elem2rec macht wahrscheinlich ein ungewolltest LIMIT)</li>
<li>first und last funktionieren noch nicht</li>
<li>quickfilter und csv-Buttons wie in der Listenansicht.</li>
<li>Button um in die Listenansicht zurück zu wechseln? Eigentlich muss man dazu ja das Fenster schließen.</li>
<li>Bei jedem neuen Record macht er drei unnütze Ajax-Calls für die Slave-Grids, die doch im ersten Reiter gar nicht angezeigt werden (z.B. <a class="reference external" href="http://127.0.0.1:8000/api/dsbe/StudiesByPerson?_dc=1279746233056&amp;fmt=json&amp;mt=&amp;mk=200022">http://127.0.0.1:8000/api/dsbe/StudiesByPerson?_dc=1279746233056&amp;fmt=json&amp;mt=&amp;mk=200022</a>)</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0722.html" title="20100722"
             >next</a> |</li>
        <li class="right" >
          <a href="0717.html" title="Famous Software Award"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2010/0721.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2010/0721.html">Online Link</a>
    </div>
  </body>
</html>