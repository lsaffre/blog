<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20101111 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="20101112" href="1112.html" />
    <link rel="prev" title="20101110" href="1110.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1112.html" title="20101112"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1110.html" title="20101110"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20101111<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="reminders">
<h2>Reminders<a class="headerlink" href="#reminders" title="Permalink to this headline">¶</a></h2>
<p>Ein weiterer Punkt kann aus der To-do-Liste raus:</p>
<ul class="simple">
<li>Im Hauptmenü eine anklickbare Liste aller Verträge und eingescannten Dokumente dieses Benutzers anzeigen,
die demnächst ablaufen.
Auf Verträgen und eingescannten Dokumenten ein Ankreuzfeld &#8220;Erinnerung im Hauptmenü anzeigen&#8221;,
um Einträge manuell abschalten zu können.</li>
</ul>
<p>Die Implementierung ist ein bisschen anders als vorgesehen:</p>
<ul class="simple">
<li>Notizen, Verweise und Verträge haben jetzt zwei neue Felder
reminder_date und reminder_text. Wenn reminder_date ausgefüllt ist
und nicht in der Zukunft liegt, wird dieser Eintrag im Hauptmenü angezeigt.</li>
</ul>
<p>Die Liste entspricht ästhetisch noch nicht ganz meinem Geschmack
(<code class="docutils literal"><span class="pre">&lt;li&gt;</span></code> wird nicht als Bullet angezeigt und ich fürchte, dass das am css von ExtJS liegt),
aber sie funktioniert.
Und ist anklickbar.</p>
<p>Intern bertrachtet hat das einige Neuerungen gebracht:</p>
<ul class="simple">
<li>Notizen, Verweise und Verträge sind jetzt Unterklassen von
<code class="xref py py-class docutils literal"><span class="pre">lino.utils.mixins.Reminder</span></code>, die das gemeinsame Interface enthält.</li>
<li>lino.reports.Report.as_string habe ich nach lino.reports.summary umbenannt.
<code class="xref py py-func docutils literal"><span class="pre">lino.lino_site.discover()</span></code> installiert jetzt in jedes Modell eine Methode
<cite>summary_row</cite>, wenn sie nicht schon existiert.</li>
<li>Lino benutzt jetzt Cheetah als Template Engine für die <code class="xref std std-xfile docutils literal"><span class="pre">welcome.html</span></code>,
und die <code class="xref std std-xfile docutils literal"><span class="pre">welcome.html</span></code> wird jetzt in den config-Verzeichnissen gesucht
(statt wie bisher in Djangos <cite>templates</cite>-Verzeichnissen).
Sorry, aber die template engine von Django ist einfach zu beschränkt!</li>
</ul>
<p>Djangos <em>Such-System</em> für Templates könnte noch interessant sein,
das kann man laut <a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/templates/api/#using-an-alternative-template-language">Dokumentation</a>
ja scheinbar sogar in Verbindung mit Cheetah benutzen.
(Siehe auch <a class="reference external" href="http://code.google.com/p/django-cheetahtemplate">http://code.google.com/p/django-cheetahtemplate</a>.)
Aber auf meine config-Verzeichnisse umzusteigen war weniger Arbeit als die Doku zu
verstehen und zu implementieren.
Wahrscheinlich ist mein Suchsystem langsamer als das von Django,
aber Performance (beim einmaligen Finden der Datei)
ist zumindest für die <code class="xref std std-xfile docutils literal"><span class="pre">welcome.html</span></code> egal.</p>
<p>7.35 Uhr Check-in.</p>
</div>
<div class="section" id="clickable-urlfield">
<h2>Clickable URLField<a class="headerlink" href="#clickable-urlfield" title="Permalink to this headline">¶</a></h2>
<p>11.30 Uhr weiter mit dem folgenden Punkt aus der to-Do-Liste:</p>
<ul class="simple">
<li>URLField muss im Detail anklickbar sein. Und vielleicht auch in der Grid.</li>
</ul>
<p><a class="reference external" href="http://www.packtpub.com/article/load-validate-submit-forms-ext-js-3.0-part2">Jorge Ramon</a>
hat mich auf den Trick mit vtype=&#8217;url&#8217; gebracht. Aber das ist nicht eigentlich das was ich will.</p>
<p>Nach etwas Surferei komme ich zu dem Schluss, dass ich mir wohl am besten mein eigenes
Feld Lino.URLField mache:</p>
<div class="highlight-python"><div class="highlight"><pre>Lino.URLField = Ext.extend(Ext.form.TriggerField,{
  triggerClass : &#39;x-form-search-trigger&#39;,
  vtype: &#39;url&#39;,
  onTriggerClick : function() {
    window.open(this.getValue(),&#39;_blank&#39;);
  }
});
</pre></div>
</div>
<p><cite>Ext.form.TriggerField</cite> ist die gemeinsame Basisklasse von ComboBox und DateField.
Die jss-Klasse <cite>x-form-search-trigger</cite> sorgt dafür, dass das Bild im Trigger-Button eine Lupe ist.
Das ist zufriedenstellend.
Zumindest in einer Form.</p>
</div>
<div class="section" id="combobox-for-id-part-of-genericforeignkey">
<h2>ComboBox for id part of GenericForeignKey<a class="headerlink" href="#combobox-for-id-part-of-genericforeignkey" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Im Detail von Notizen und Links sieht man zwei Felder &#8220;Besitzerart&#8221; und &#8220;Besitzer&#8221;.
Letzteres müsste ebenfalls eine (kontext-sensitive) Combobox sein.</li>
</ul>
<p>Das war nicht einfach. Aber es funktioniert jetzt für Links schon fast.
Besitzer wird jetzt angezeigt, und man kann eine Auswahlliste aufklappen.
Aber Speichern geht noch nicht...</p>
<p><cite>Chooser.get_text_for_value</cite> ist jetzt implementiert:
die schaut jetzt nach einer Methode <a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display">get_FOO_display</a>.</p>
<p>Ich breche dieses Ticket ab,
denn mir ist aufgefallen,
dass das Selbstbefriedigung war:
im DSBE ist es gar nicht nötig, dass man Notizen &#8220;egal was&#8221; zuordnen kann.
Lieber statt dessen zwei Foreign Keys <cite>person</cite> und <cite>company</cite> und basta.
Dann ist das user interface intuitiver.
Übrigens hat die mangelhafte Übersetzung von Owner (&#8220;Besitzer&#8221;) mich darauf gebracht...</p>
<p>Das ist eine gute Prüfungsarbeit für das Feature &#8220;wiederverwertbare Modelle&#8221;:
links.Link und notes.Note sind jetzt <cite>abstract</cite>.
Dadurch kann (und muss) man sie in der Anwendung noch erweitern.
dsbe erweitert sie mit <cite>lino.utils.mixins.PartnerDocument</cite> (also zwei Felder <cite>person</cite> und <cite>company</cite>).
Man könnte auch einfach nur ein <cite>pass</cite> reinschreiben,
wenn man Notizen und Links nur pro Benutzer und Art braucht.
Oder (wenn die Comboboxen mal klappen) benutzt man <cite>lino.utils.mixins.Owned</cite>.
Und noch später vielleicht auch mal ein Modul <cite>tags</cite>, mit dem man dann eine Notiz
beliebig vielen anderen Objekten zuweisen kann...</p>
<p>17.50 Uhr: Die Prüfungsarbeit scheint erfolgreich abgeschlossen.</p>
<p>Check-in.</p>
<p>20.45 Uhr : iGen funktioniert jetzt auch wieder (zumindest auf den ersten Blick).</p>
<p>Check-in.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1112.html" title="20101112"
             >next</a> |</li>
        <li class="right" >
          <a href="1110.html" title="20101110"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2010/1111.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2010/1111.html">Online Link</a>
    </div>
  </body>
</html>