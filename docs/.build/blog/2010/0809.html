<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2010-08-09 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="2010-08-10" href="0810.html" />
    <link rel="prev" title="20100808" href="0808.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0810.html" title="2010-08-10"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0808.html" title="20100808"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>2010-08-09<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="grid-configurations">
<h2>Grid Configurations<a class="headerlink" href="#grid-configurations" title="Permalink to this headline">¶</a></h2>
<p>Man kann jetzt den Button zum Speichern der <a class="reference external" href="http://www.lino-framework.org/ref/glossary.html#term-gc" title="(in Lino v1.6)"><span class="xref std std-term">GC</span></a> sehen. Der ist nicht wie ursprünglich geplant ein Tool-Button (oben rechts in Titelleiste des GridPanels), weil GridPanels ja gar keinen Titel haben, wenn sie das Hauptelement sind. Also denke ich, dass der Button in der unteren rechten Ecke als Teil der bbar relativ gut aufgehoben ist. Wie man diese Buttons mit schönen Icons versehen kann, muss ich bei Gelegenheit mal rausfinden, das kommt in die <a class="reference external" href="http://www.lino-framework.org/todo.html">/todo</a>.</p>
<p><a class="reference external" href="http://www.lino-framework.org/ref/javascript.html#Lino.GridPanel" title="(in Lino v1.6)"><code class="xref js js-class docutils literal"><span class="pre">Lino.GridPanel()</span></code></a> kriegt eine Methode <cite>save_grid_config()</cite> schickt einen Ajax-Request raus, ein PUT für die aktuell geladene GC (name, column_widths, columns, filters,...). Und im config param <cite>ls_grid_config</cite> ist das Array mit der GC für dieses Panel.</p>
<p>Eine GridConfig hat folgende Struktur:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">column_widths:</th><td class="field-body">array of column widths</td>
</tr>
<tr class="field-even field"><th class="field-name">column_order:</th><td class="field-body">array of column indexes</td>
</tr>
<tr class="field-odd field"><th class="field-name">filters:</th><td class="field-body">GridFilters data</td>
</tr>
</tbody>
</table>
<p>Wenn man über die Combobox von einer GC zur anderen wechselt, muss diese Grid eventuell neu konfiguriert und/oder neu geladen werden. Es wäre ja gut, wenn er dabei intelligent vorginge, also diese beiden Operationen nur wenn nötig ausführt. <a class="reference external" href="http://www.sencha.com/deploy/dev/docs/?class=Ext.grid.EditorGridPanel">Ext.grid.EditorGridPanel</a> hat keine Methode <cite>reconfigure</cite> oder <cite>setColumnModel</cite>, also ich muss schon die ganze Komponente ersetzen, wenn sich die Kolonnenreihenfolge ändert. Wenn sich dagegen nur die Kolonnenfilter ändern, kann die Grid bleiben, aber ein neues GET an den Server muss gemacht werden. Wenn sich nur Kolonnebreiten ändern, dann kann das direkt angewendet werden.</p>
<p>Für gut müsste ich vor dem Speichern einer GC ein Dialogfenster anzeigen:</p>
<div class="highlight-python"><div class="highlight"><pre>+-- Save Grid Configuration --+
|                             |
| name: _____________________ |
|                             |
| X column widths             |
| X column order              |
| X filters                   |
|                             |
+-----------------------------+
</pre></div>
</div>
<p>Wenn man z.B. eine bestimmte Filterkombination als custom GC abspeichert, dann lässt man die ersten beiden Optionen abgeschaltet. Wenn sich dann die Standard-GC für diesen Report ändert, dann &#8220;erbt&#8221; die custom GC diese Werte.</p>
<p>Achtung: Kolonnenbreiten müssten also in der Reihenfolge der &#8220;internen&#8221; Kolonnen gespeichert werden, also nicht einfach nur ein <code class="docutils literal"><span class="pre">Ext.pluck(this.colModel.columns,'width')</span></code>, sondern etwas im Stil:</p>
<div class="highlight-python"><div class="highlight"><pre>var colwidths = Array(this.colModel.columns.length);
for (i in this.colModel.columns) {
   colwidths[this.colModel.columns[i].colIndex] = this.colModel.columns[i].width
}
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0810.html" title="2010-08-10"
             >next</a> |</li>
        <li class="right" >
          <a href="0808.html" title="20100808"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2010/0809.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2010/0809.html">Online Link</a>
    </div>
  </body>
</html>