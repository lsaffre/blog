<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>18.02.2010 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2010" href="index.html" />
    <link rel="next" title="&lt;no title&gt;" href="0219.html" />
    <link rel="prev" title="&lt;no title&gt;" href="0217.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0219.html" title="&lt;no title&gt;"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0217.html" title="&lt;no title&gt;"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2010</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>18.02.2010<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>8.56 Uhr. So, mit Issue 94 bin ich jetzt zufrieden.
[<a class="reference external" href="http://code.google.com/p/lino/source/detail?r=456477876fb12cc3c52158babb7b34c6ad67a32b">http://code.google.com/p/lino/source/detail?r=456477876fb12cc3c52158babb7b34c6ad67a32b</a> checkin].</p>
<p>Weiter mit der Datenanbindung des Ei-Editors (Issue 103). Das wird relativ leicht gehen, aber ich finde es nicht. Also zuerst mal aufräumen.</p>
<p><cite>Lino.show_slave()</cite> umbenannt nach <cite>Lino.slave_handler()</cite>, weil sie führt die Aktion ja nicht selber aus, sondern liefert eine Funktion, die die Aktion ausführt. Ebenso <cite>Lino.props_toggle()</cite> umbenannt nach <cite>Lino.props_toggle_handler()</cite>.</p>
<p>Diese Handler-Funktionen (also globale Funktionen, die eine Funktion zurückgeben, sind eigentlich nur shortcuts. Statt zu schreiben:</p>
<div class="highlight-python"><div class="highlight"><pre>buttons.append(dict(
  handler=js_code(&quot;Lino.slave_handler(this,%r)&quot; % url,
  text=lh.layout.label))
</pre></div>
</div>
<p>Könnte ich auch gleich schreiben:</p>
<div class="highlight-python"><div class="highlight"><pre>buttons.append(dict(
  scope=js_code(&#39;this&#39;),
  handler=js_code(&quot;function(){Lino.do_dialog(this,%r,{})&quot; % url,
  text=lh.layout.label))
</pre></div>
</div>
<p>Aber ich weiß momentan nicht, welche Methode schneller ist. Also lassen wir die Methode, die am lesbarsten ist...</p>
<p>Beim Aufräumen fand ich auch noch ein paar Nebenwirkungen von Issue 94.</p>
<p>17.09 Uhr. Puh... Siebeneinhalb Stunden Lino, das reicht für heute. Und nicht nur hier und da ein paar kleine Änderungen, sondern mehrere interne Umstrukturierungen, von denen ich mir höchstens eine pro Tag zutrauen würde, wenn das im Voraus planbar wäre. Meine Methode zum Generieren von Javascript gefällt mir immer mehr. Und dann hat eine ReportRequest jetzt ein Attribut <cite>master</cite>. Da könnte man sich fragen, wieso, weil das ja im <cite>Report.master</cite> steht. Der feine Unterschied kommt, wenn <cite>Report.master</cite> ein <cite>ContentType</cite> ist. Dann ermittelt <cite>BaseViewReportRequest</cite> die master-Klasse dynamisch anhand des GET-Parameters (<cite>mt</cite>). Und damit properties.PropValuesByOwner alle Eigenschaften anzeigt (nicht nur die, die einen Wert haben), muss er get_queryset() überschreiben und den (dynamisch ermittelten) master kennen. Und statt in <cite>Report.get_queryset()</cite> zu den 1000 Parametern noch einen weiteren hinzu zu fügen, wird die jetzt einfach nur mit dem ReportRequest aufgerufen.</p>
<p>Sichtbare Resultate: Der Ei-Editor zeigt jetzt immer schön die Eigenschaften der jeweiligen Person oder Organisation an, wenn man durch die Liste klickt. Und zwar <em>auch</em> die Eigenschaften, die <em>nicht</em> gesetzt sind. Und im Fenstertitel zeigt er den Namen des Owners. Und wenn man das Ei-Fenster selber schließt, wird der Properties-Button rausgetoggelt</p>
<p>[<a class="reference external" href="http://code.google.com/p/lino/source/detail?r=0ce74d9bd5bb6dc09af3635e98fe5fd8cef4d7db">http://code.google.com/p/lino/source/detail?r=0ce74d9bd5bb6dc09af3635e98fe5fd8cef4d7db</a> checkin]</p>
<p>Bleibt für morgen:</p>
<blockquote>
<div><ul class="simple">
<li>Eigenschaften speichern</li>
<li>die Buttons der verschiedenen Slave-Fenster könnte ich auch zu Togglebuttons machen</li>
<li>Testen</li>
</ul>
</div></blockquote>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0219.html" title="&lt;no title&gt;"
             >next</a> |</li>
        <li class="right" >
          <a href="0217.html" title="&lt;no title&gt;"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2010</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2010/0218.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2010/0218.html">Online Link</a>
    </div>
  </body>
</html>