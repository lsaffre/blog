<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Monday, October 20, 2014 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2014" href="index.html" />
    <link rel="next" title="Tuesday, October 21, 2014" href="1021.html" />
    <link rel="prev" title="Saturday, October 18, 2014" href="1018.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1021.html" title="Tuesday, October 21, 2014"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1018.html" title="Saturday, October 18, 2014"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2014</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="monday-october-20-2014">
<h1>Monday, October 20, 2014<a class="headerlink" href="#monday-october-20-2014" title="Permalink to this headline">¶</a></h1>
<p>Still working on <a class="reference external" href="https://github.com/lsaffre/lino/blob/master/docs/tickets/136">docs/tickets/136</a></p>
<div class="section" id="bestatigung-kleiderkammer-fertig">
<h2>Bestätigung &#8220;Kleiderkammer&#8221; fertig<a class="headerlink" href="#bestatigung-kleiderkammer-fertig" title="Permalink to this headline">¶</a></h2>
<p>I found a last bug (in the fixture which generates demo data) which
caused example of the <a class="reference external" href="http://welfare.lino-framework.org/api/lino_welfare.modlib.aids.html#xfile-clothing_bank.body.html" title="(in Lino Welfare Reference Manual v1.1)"><code class="xref std std-xfile docutils literal"><span class="pre">clothing_bank.body.html</span></code></a> for
<a class="reference external" href="http://welfare.lino-framework.org/tested/households.html#paulfrisch" title="(in Lino Welfare Reference Manual v1.1)"><span>Paul Frisch</span></a> in the <a class="reference external" href="http://de.welfare.lino-framework.org/excerpts.html#beispiele">Beispiele</a>
section of the German user manual to be wrong.  Now I finally dare to
link to it: <a class="reference external" href="http://de.welfare.lino-framework.org/dl/excerpts/aids.SimpleConfirmation-13.pdf">here it is</a>!</p>
<p>Vocabulary:</p>
<ul class="simple">
<li>Rückerstattung - Refund</li>
<li>Kostenübernahme - Cost transfer</li>
<li>Clothing costs transfer - Kostenübernahme Kleidung</li>
</ul>
</div>
<div class="section" id="recipient-of-an-excerpt">
<h2>Recipient of an excerpt<a class="headerlink" href="#recipient-of-an-excerpt" title="Permalink to this headline">¶</a></h2>
<p>However there were still some &#8220;details&#8221; to fix.  For example the
following item turned out to be rather tricky:</p>
<ul class="simple">
<li>Wenn kein Empfänger angegeben ist, trotzdem den entsprechenden Platz
vorsehen</li>
</ul>
<p>The <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.excerpts.html#xfile-excerpts/Default.odt" title="(in Lino v1.6)"><code class="xref std std-xfile docutils literal"><span class="pre">excerpts/Default.odt</span></code></a> template is designed to be
overridden by local site administrators in order to match their letter
paper. To minimize their configuration work, the template should work
for any type of excerpt, not only for confirmations.</p>
<p>To solve this, I removed the <cite>get_print_recipient</cite> method from
<code class="xref py py-class docutils literal"><span class="pre">dd.Model</span></code>, added a new field
<code class="xref py py-attr docutils literal"><span class="pre">lino.modlib.excerpts.ExcerptType.print_recipient</span></code> and replaced in
<a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.excerpts.html#xfile-excerpts/Default.odt" title="(in Lino v1.6)"><code class="xref std std-xfile docutils literal"><span class="pre">excerpts/Default.odt</span></code></a> the test <code class="docutils literal"><span class="pre">do</span> <span class="pre">text</span> <span class="pre">if</span>
<span class="pre">obj.get_print_recipient()</span></code> by <code class="docutils literal"><span class="pre">do</span> <span class="pre">text</span> <span class="pre">if</span>
<span class="pre">this.excerpt_type.print_recipient)</span></code>.  This was also inspired by
<a class="reference external" href="http://www.lino-framework.org/community/contributors.html#joe" title="(in Lino v1.6)"><span>Josef Kejzlar</span></a>&#8216;s suggestions for ticket <a class="reference external" href="https://github.com/lsaffre/lino/blob/master/docs/tickets/134">docs/tickets/134</a>: developers
who don&#8217;t use the <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.excerpts.html#module-lino.modlib.excerpts" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.excerpts</span></code></a> module should not be bothered
with a method like <cite>get_print_recipient</cite> in Lino&#8217;s <code class="xref py py-class docutils literal"><span class="pre">dd.Model</span></code>
class.</p>
<p>And I discovered that it was no longer possible to specify a recipient
for a presence certificate.  So <code class="xref py py-class docutils literal"><span class="pre">lino.modlib.excerpts.Excerpt</span></code> now is a
<code class="xref py py-class docutils literal"><span class="pre">ml.contacts.ContactRelated</span></code> again.</p>
<p><a class="reference external" href="http://www.lino-framework.org/marked_changes.html#mustconfig" title="(in Lino v1.6)"><span>Change in local config</span></a> :
Adapt local <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.excerpts.html#xfile-excerpts/Default.odt" title="(in Lino v1.6)"><code class="xref std std-xfile docutils literal"><span class="pre">excerpts/Default.odt</span></code></a>
template: replace the condition
<code class="docutils literal"><span class="pre">do</span> <span class="pre">text</span> <span class="pre">if</span> <span class="pre">obj.get_print_recipient()</span></code>
by
<code class="docutils literal"><span class="pre">do</span> <span class="pre">text</span> <span class="pre">if</span> <span class="pre">this.excerpt_type.print_recipient)</span></code>.</p>
<p><a class="reference external" href="http://www.lino-framework.org/marked_changes.html#mustmig" title="(in Lino v1.6)"><span>Change in database structure</span></a> :
New field <code class="xref py py-attr docutils literal"><span class="pre">lino.modlib.excerpts.ExcerptType.print_recipient</span></code>.
New fields in <code class="xref py py-class docutils literal"><span class="pre">lino.modlib.excerpts.Excerpt</span></code> because it now is a
<code class="xref py py-class docutils literal"><span class="pre">ml.contacts.ContactRelated</span></code> again.</p>
</div>
<div class="section" id="two-changes-in-atelier">
<h2>Two changes in <a class="reference external" href="http://atelier.lino-framework.org/api/index.html#module-atelier" title="(in atelier v0.0)"><code class="xref py py-mod docutils literal"><span class="pre">atelier</span></code></a><a class="headerlink" href="#two-changes-in-atelier" title="Permalink to this headline">¶</a></h2>
<p>The <cite>doc_trees</cite> parameter is no longer in <a class="reference external" href="http://atelier.lino-framework.org/api/atelier.fablib.html#xfile-fabfile.py" title="(in atelier v0.0)"><code class="xref std std-xfile docutils literal"><span class="pre">fabfile.py</span></code></a> but in
the project&#8217;s main module.  This was necessary in order to load also
non-standard doc trees into the <cite>intersphinx_mapping</cite>.</p>
<p><cite>intersphinx_url</cite> changed to <cite>intersphinx_urls</cite> and is now expected to
be a dict with one URL for every name in <cite>doc_trees</cite>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1021.html" title="Tuesday, October 21, 2014"
             >next</a> |</li>
        <li class="right" >
          <a href="1018.html" title="Saturday, October 18, 2014"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2014</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2014/1020.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2014/1020.html">Online Link</a>
    </div>
  </body>
</html>