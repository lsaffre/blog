<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110716 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110717" href="0717.html" />
    <link rel="prev" title="20110715" href="0715.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0717.html" title="20110717"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0715.html" title="20110715"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110716<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="another-successful-gpl-software-project">
<h2>Another successful GPL software project<a class="headerlink" href="#another-successful-gpl-software-project" title="Permalink to this headline">¶</a></h2>
<p>I just read a story about a successful GPL software project in Australia:</p>
<p><a class="reference external" href="http://sourceforge.net/blog/potm-201107/">http://sourceforge.net/blog/potm-201107/</a></p>
<p>My spontaneous reaction: yes, Lino id also hoping for
a person who is able and eager to found and lead
(as &#8220;gérant&#8221;/&#8221;Geschäftsführer&#8221;) an
organization (asbl or sprl) that offers and warrents professional
Lino support.</p>
</div>
<div class="section" id="erweiterung-vertrage">
<h2>Erweiterung Verträge<a class="headerlink" href="#erweiterung-vertrage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="planung">
<h3>Planung<a class="headerlink" href="#planung" title="Permalink to this headline">¶</a></h3>
<p>Wir planen folgende Erweiterung der Datenstruktur im Bereich Verträge,
die vor allem für die Übersichtsliste der laufenden Verträge
<code class="xref py py-class docutils literal"><span class="pre">ContractsSituation</span></code>
wichtig sind.</p>
<p>Also eine Organisation kann ja jetzt schon zum Kursanbieter werden,
indem man die entsprechende Checkbox ankreuzt. Neben dieser Checkbox
käme eine weitere Checkbox &#8220;Vertragsanbieter&#8221; (bzw. &#8220;Stellenanbieter&#8221;).</p>
<p>Ein Vertragsanbieter wäre also eine Organisation, die potentiell
zusätzliche Datenfelder haben kann (momentan fällt mir aber keines ein).
Im Reiter &#8220;Notizen&#8221; einer normalen Organisation würde die Liste der
Verträge dann verschwinden.</p>
<p>Vertragsanbieter wären nicht nur für die Art.60-7-Verträge, sondern alle
Organisationen (inkl. ÖSHZ Eupen), mit denen Verträge jedweder Art
gemacht werden können. Beim Erstellen eines neuen Vertrags von einer
Person aus würden auch nicht mehr alle Organisationen zur Auswahl
angezeigt, sondern nur die Vertragsanbieter.</p>
<p>Jeder Vertragsanbieter hätte eine Serie von &#8220;Vertragsangeboten&#8221; oder
&#8220;Stellen&#8221; (das Äquivalent der Kurse). Die Gesamtliste sähe z.B. so aus:</p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="18%" />
<col width="25%" />
<col width="15%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Nr.</th>
<th class="head">Anbieter</th>
<th class="head">Vertragsart</th>
<th class="head">Kapazität</th>
<th class="head">Bezeichnung</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>Tagesstätte</td>
<td>Art.60-7</td>
<td>4</td>
<td>Tagesstätte</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>BISA</td>
<td>Art.60-7</td>
<td>3</td>
<td>BISA Art.60-7</td>
</tr>
<tr class="row-even"><td>3</td>
<td>BISA</td>
<td>VSE</td>
<td>1</td>
<td>BISA VSE-Stelle</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>ÖSHZ</td>
<td>Art.60-7 intern</td>
<td>3</td>
<td>Häusliche Hilfe</td>
</tr>
<tr class="row-even"><td>5</td>
<td>ÖSHZ</td>
<td>Art.60-7 intern</td>
<td>2</td>
<td>Mosaik</td>
</tr>
</tbody>
</table>
<p>Die Vertragsart ist hier die, die bei neuen Verträgen mit diesem
Anbieter par défaut gesetzt wird (ein Feld, das momentan in den
Firmenarten steht, wo es raus käme).</p>
<p>In den Verträgen käme ein neues Feld &#8220;Angebot&#8221; bzw. &#8220;Stelle&#8221; (&#8220;in dessen
Rahmen der Vertrag läuft&#8221;). Ich denke, dass dieses Feld obligatorisch
sein sollte. Die Felder &#8220;Vertragsart&#8221; und &#8220;Organisation&#8221; könnten dann
aus dem Eingabefenster des Vertrags selber verschwinden (weil das ja im
Angebot steht). Beim Release würden die Angebote für existierende
Verträge automatisch erstellt. Was ich noch nicht weiß: ist die
Kontaktperson/Eigenschaft ebenfalls pro Stelle einigermaßen fix.</p>
<p>Melanie hat ja klar gesagt, dass es ihr unnatürlich scheint, für jeden
Kandidaten schon einen &#8220;Vertrag&#8221; zu erstellen. Also eine zusätzliche
Tabelle für Vertragsanfragen:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="25%" />
<col width="15%" />
<col width="20%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Person</th>
<th class="head">Vertragsangebot</th>
<th class="head">Bemerkung</th>
<th class="head">erstellt am</th>
<th class="head">Vertrag</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Max Mustermann</td>
<td>Nr. 2</td>
<td>blabla</td>
<td>15.07.2011</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Das Feld &#8220;Vertrag&#8221; ist leer, solange die Anfrage offen ist. Auf einer
offenen Vertragsanfrage käme ein Button &#8220;Vertrag erstellen&#8221;, der das
&#8220;Vertrag erstellen&#8221;-Fenster öffnet. Und wenn man dieses ausfüllt und
speichert, muss Lino die Nummer des Vertrags in der Anfrage speichern.</p>
<p>Man kann einen Vertrag weiterhin &#8220;manuell&#8221; erstellen, ohne eine konkrete
Vertragsanfrage vorliegen zu haben.</p>
<p>Um das Listing &#8220;Übersicht&#8221; machen zu können, muss jede Vertragsstelle
noch eine &#8220;Stellenart&#8221; zugewiesen bekommen :</p>
<ul class="simple">
<li>Sozialwirtschaft = &#8220;majorés&#8221;</li>
<li>INTERN</li>
<li>EXTERN (Öffentl. VoE mit Kostenrückerstattung)</li>
<li>EXTERN (Privat Kostenrückerstattung)</li>
<li>VSE</li>
<li>Sonstige (alle nicht</li>
</ul>
</div>
<div class="section" id="implementierung">
<h3>Implementierung<a class="headerlink" href="#implementierung" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Neue Tabellen:</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal"><span class="pre">JobProvider</span></code> : Vertragsanbieter</li>
<li><code class="xref py py-class docutils literal"><span class="pre">Job</span></code> : Vertragsangebot (&#8220;Stelle&#8221;)</li>
<li><code class="xref py py-class docutils literal"><span class="pre">JobType</span></code> : Stellenart</li>
<li><code class="xref py py-class docutils literal"><span class="pre">JobRequest</span></code> : Vertragsanfrage</li>
</ul>
</li>
<li><p class="first">Die vier bestehenden Tabellen zu den Verträgen habe ich in ein eigenes neues
Modul <code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.jobs</span></code> ausgelagert. Bei der Datenmigration müssen
wir deshalb dran denken, dass folgende Models jetzt ein neues app label
haben:</p>
<div class="highlight-python"><div class="highlight"><pre>dsbe.Contract -&gt; jobs.Contract
dsbe.ContractType -&gt; jobs.ContractType
dsbe.ContractEnding -&gt; jobs.ContractEnding
dsbe.ExamPolicy -&gt; jobs.ExamPolicy
</pre></div>
</div>
</li>
<li><p class="first">CompanyType.contract_type and Company.hourly_rate moved to Job.
Company.hourly_rate remains but is no longer used except for data migration.</p>
</li>
</ul>
</div>
<div class="section" id="datenmigration">
<h3>Datenmigration<a class="headerlink" href="#datenmigration" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-func docutils literal"><span class="pre">lino.tools.resolve_model()</span></code> macht jetzt keine Exception mehr,
wenn sie das Modell nicht findet, sondern returnt ein Fake-Modell.
Das war nötig, damit ich einen Dump aus Version 1.1.17 ohne manuelle
Bearbeitung (außer dem Entkommentieren der automagischen beiden Zeilen am Ende)
importieren kann.</p>
<p>Bzw. genauer gesagt ist doch eine manuelle Korrektur nötig:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">create_contacts_companytype</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">abbr</span><span class="p">,</span> <span class="n">name_fr</span><span class="p">,</span> <span class="n">name_en</span><span class="p">,</span> <span class="n">abbr_fr</span><span class="p">,</span> <span class="n">abbr_en</span><span class="p">,</span> <span class="n">contract_type_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">CompanyType</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">abbr</span><span class="o">=</span><span class="n">abbr</span><span class="p">,</span><span class="n">name_fr</span><span class="o">=</span><span class="n">name_fr</span><span class="p">,</span><span class="n">name_en</span><span class="o">=</span><span class="n">name_en</span><span class="p">,</span><span class="n">abbr_fr</span><span class="o">=</span><span class="n">abbr_fr</span><span class="p">,</span><span class="n">abbr_en</span><span class="o">=</span><span class="n">abbr_en</span><span class="p">)</span>
</pre></div>
</div>
<p>Also der Parameter contract_type_id muss ignoriert werden.
Hier kann ich die Funktion nicht einfach ersetzen wegen der Babelfelder,
die ja lokal spezifisch sind.</p>
<p>Checkin 20110716, um die Sache auf Jana (einem internen Server) zu testen.</p>
</div>
</div>
<div class="section" id="endspurt-vor-dem-release">
<h2>Endspurt vor dem Release<a class="headerlink" href="#endspurt-vor-dem-release" title="Permalink to this headline">¶</a></h2>
<p>Wir sind kurz vor dem Release: Übersetzungen, Feinschliff, Feierabend...
morgen sehen wir, ob nicht noch ein Show-Stopper kommt.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0717.html" title="20110717"
             >next</a> |</li>
        <li class="right" >
          <a href="0715.html" title="20110715"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2011/0716.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2011/0716.html">Online Link</a>
    </div>
  </body>
</html>