<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20111213 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20111214" href="1214.html" />
    <link rel="prev" title="20111212" href="1212.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1214.html" title="20111214"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1212.html" title="20111212"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20111213<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="how-authentication-is-configured">
<h2>How authentication is configured<a class="headerlink" href="#how-authentication-is-configured" title="Permalink to this headline">¶</a></h2>
<p>The following todo is done:</p>
<ol class="arabic simple">
<li>Browser-specific language selection is nice...
but Lino should also make it
possible to override this browser-specific language setting.
The most straigtforward place
(at least on a site that is using
<a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.users.html#module-lino.modlib.users" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.users</span></code></a>)
is the language field from
<code class="xref py py-class docutils literal"><span class="pre">lino.modlib.contacts.Contact</span></code>.</li>
</ol>
<p>New Lino configuration option
<code class="xref py py-attr docutils literal"><span class="pre">lino.Lino.default_user</span></code> and some changes in
how authentication is configured.</p>
<p>SimulateRemoteUserMiddleware has been removed because it is
no longer useful.
Moved lino.modlib.users.middleware to lino.utils.auth and made
it generally work</p>
<p>Started <a class="reference external" href="http://www.lino-framework.org/topics/auth.html">/topics/auth</a> which should give an overview.</p>
</div>
<div class="section" id="lino-fields-linkedforeignkey-freezed">
<h2><code class="xref py py-class docutils literal"><span class="pre">lino.fields.LinkedForeignKey</span></code> freezed<a class="headerlink" href="#lino-fields-linkedforeignkey-freezed" title="Permalink to this headline">¶</a></h2>
<p>Im neuen fields.LinkedForeignKey war noch ein Bug:
Link.type_choices() kriegt den master nicht mitgeteilt.
Ich nehme an, dass ich einen Trick finden muss, dass
LinksFromThis.get_create_kw() die master_instance
irgendwie in a speichert.</p>
<p>17.05 Uhr : nachdem ich es fast geschafft hatte,
dass Link.type_choices()
den master mitgeteilt kriegt, stieß ich auf ein weiteres Problem:
choices_view holt sich ja gar keine Instanz des Records!
An dieses Detail hatte ich nicht gedacht.
Jetzt ist Schluss! Sowieso hatte ich schon zu ahnen begonnen,
dass die Idee mit den Generic Links gar nicht so toll ist.
Sie hat den Nachteil, dass man dann einzelne Link-Arten
nicht erweitern kann.
Also wieder zurück mit den Roles (die Tabellennamen sind
da nicht ganz glücklich verteilt: &#8220;Contact&#8221; müsste ich vielleicht
umbenennen nach &#8220;Partner&#8221;, RoleType nach Role und Role nach Contact.</p>
<p>Aber ein Role ist jetzt wieder wie ganz früher
eine Verknüpfung zwischen einer Company und
einer Person, nicht wie zwischendurch zwischen zwei Contacts.
Statt Role.parent und Role.child (beide ein allgemeiner FK zu Contact)
haben wir wieder Role.company und Role.person.
Und wenn man irgendwann mal z.B. Verknüpfungen von Person zu
Person oder von Firma zu Firma machen will,
dann mach ich dafür eigene Tabellen.
Es ist ja nicht so, dass eine neue Tabelle viel Arbeit wäre.</p>
<p>Also lino.fields.LinkedForeignKey und somit auch
lino.modlib.links
sind eingefroren, bevor sie überhaupt benutzt wurden,
denn sie funktionieren nur <em>fast</em>:
es fehlt die Möglichkeit,
in einem Chooser die verknüpften Objekte abzufragen.
Falls das in der Zukunft mal nötig sein sollte, sehen wir weiter.</p>
</div>
<div class="section" id="more-bugfixes">
<h2>More bugfixes<a class="headerlink" href="#more-bugfixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>CourseProvider had no inherited details</li>
<li>Layout Editor works again</li>
<li><code class="docutils literal"><span class="pre">params.is_main_window</span> <span class="pre">=</span> <span class="pre">true</span></code> instead of <code class="docutils literal"><span class="pre">params.containing_window</span> <span class="pre">=</span> <span class="pre">true</span></code></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1214.html" title="20111214"
             >next</a> |</li>
        <li class="right" >
          <a href="1212.html" title="20111212"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2011/1213.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2011/1213.html">Online Link</a>
    </div>
  </body>
</html>