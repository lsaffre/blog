<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110627-28 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110630" href="0630.html" />
    <link rel="prev" title="20110625" href="0625.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0630.html" title="20110630"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0625.html" title="20110625"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110627-28<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="kleinkram-dokumentvorlagen-vertrage">
<h2>Kleinkram Dokumentvorlagen Verträge<a class="headerlink" href="#kleinkram-dokumentvorlagen-vertrage" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Zwei Felder in Contract (<cite>goals</cite> und <cite>duties_person</cite>)
waren noch nicht schreibgeschützt wenn Vertrag ausgedruckt.</li>
<li>Auch Firmen haben jetzt eine Methode <cite>get_full_name</cite>
und eine property <cite>full_name</cite>, die in Dokumentvorlagen
benutzt werden kann.</li>
</ul>
</div>
<div class="section" id="listings-weiter">
<h2>Listings weiter<a class="headerlink" href="#listings-weiter" title="Permalink to this headline">¶</a></h2>
<p>Eine subtile aber interessante Änderung:
die Methode <cite>get_detail_url</cite> einer Person machte bisher ein URL im Stil:</p>
<div class="highlight-python"><div class="highlight"><pre>/api/contacts/Persons/68?fmt=detail
</pre></div>
</div>
<p>Jetzt macht sie:</p>
<div class="highlight-python"><div class="highlight"><pre>/api/contacts/Person/68?fmt=detail
</pre></div>
</div>
<p>Der Interessante daran ist, dass der <cite>_lino_model_report</cite> jetzt
erst in <cite>api_elem_view</cite> extrahiert wird und der Name des Reports
nicht im URL erscheint.</p>
<p>Das brauche ich für die Listings, denn die haben alle nur einen automatisch
generierten Report, und den fände ich in einer URI fehl am Platze.</p>
<p>Und noch was Subtiles:</p>
<p>wenn ich ein Insert-Fenster <em>via Permalink</em> aufrufe, zum Beispiel:</p>
<div class="highlight-python"><div class="highlight"><pre>http://127.0.0.1:8000/api/dsbe/ContractsByPerson?fmt=insert&amp;mt=17&amp;mk=16
</pre></div>
</div>
<p>und wenn ich es dann ausfülle und bestätige,
dann stand ich bisher wieder im Hauptbildschirm. Weil
der <cite>success callback</cite> in <cite>Lino.InsertWrapper.save()</cite> keinen <cite>caller</cite>
hat.
Bisher war das nebensächlich, weil normale Benutzer den Permalink nicht benutzen.
Aber für die Listings wäre es wichtig,
dass ich auch dann das Detail des
erstellten Records angezeigt kriege.</p>
<p>Und noch was Subtiles: bisher wurde <cite>Lino.setup_main_menu</cite>
einmal beim Serverstart gerufen und generierte also ein Menü,
das für alle Benutzer in allen Situationen gilt.
Bei jedem Request wurde dann <cite>settings.LINO.main_menu menus.MenuItem.menu_request</cite>
<cite>menus.MenuItem.menu_request</cite>.
Das ist jetzt Vergangenheit (muss in igen wohl noch angepasst werden).</p>
<p>Und <em>noch</em> was Subtiles:
Reports on abstract Models.</p>
<p>Voilà, damit funktionieren Listings nun prinzipiell.
Dokumentation müsste ich bei Gelegenheit natürlich schreiben.</p>
</div>
<div class="section" id="instantiator">
<h2>Instantiator<a class="headerlink" href="#instantiator" title="Permalink to this headline">¶</a></h2>
<p>Kleine Änderung in <a class="reference external" href="http://www.lino-framework.org/api/lino.utils.instantiator.html#lino.utils.instantiator.Instantiator" title="(in Lino v1.6)"><code class="xref py py-class docutils literal"><span class="pre">lino.utils.instantiator.Instantiator</span></code></a>: wenn man beim Instanzieren
mit <code class="docutils literal"><span class="pre">**kw</span></code> schon Standardwerte eingegeben hatte und dann bei build diese überschreiben
wollte, dann funktionierte das nicht. Jetzt wohl.</p>
</div>
<div class="section" id="calendar">
<h2>Calendar<a class="headerlink" href="#calendar" title="Permalink to this headline">¶</a></h2>
<p>Nach der (gar nicht so einfachen) Lektüre von <a class="reference external" href="ftp://ftp.rfc-editor.org/in-notes/rfc5545.txt">RFC 5545 (Internet Calendaring and Scheduling Core Object Specification (iCalendar))</a> habe ich das Modul <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.cal.html#module-lino.modlib.cal" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.cal</span></code></a> begonnen.
Zunächst mal nur Events und Tasks, also noch ohne
recursion rules, alarms und journal entries.</p>
<p>Das alles hat momentan noch nichts mit Datenaustausch zu tun
(außer dass es eben die im RFC 5545
beschriebene und weithin bekannte Datenstruktur eines Kalenders ist).
Ja, Lino wird dadurch ein (sehr einfacher) calendar client,
aber unabhängig davon, ob die Benutzer die Eingabe und Pflege
ihrer Termine von Lino aus machen oder nicht, muss ich in Lino
doch alle Termine in der Datenbank haben, wenn Lino z.B. sinnvolle
Vorschläge machen soll, welche Kunden eine convocation erhalten sollen.
Der Datenaustausch mit anderen iCalendar-Anwendungen ist am einfachsten
zu implementieren, wenn ich in meiner Django-Datenbank die im RFC 5545
beschriebenen Modelle habe.</p>
<p>Erster Erfolg. Checkin 20110628.</p>
</div>
<div class="section" id="anrede-und-titel">
<h2>Anrede und Titel<a class="headerlink" href="#anrede-und-titel" title="Permalink to this headline">¶</a></h2>
<p>Ich benutze ja das Wort <cite>salutation</cite> für Herr(n) Frau, Mr., Mrs. usw.
Im Feld <cite>Person.title</cite> kommen dagegen Dinge wie Dr., Prof. usw.
Doof nun, dass das englische Wort &#8220;Title&#8221; mal &#8220;Anrede&#8221; und mal &#8220;Titel&#8221; bedeutet.
Tröstlich, dass ich nicht der einzige mit solchen Problemen bin:
<a class="reference external" href="http://dict.leo.org/forum/viewUnsolvedquery.php?idThread=512446&amp;idForum=1&amp;lp=ende&amp;lang=de">http://dict.leo.org/forum/viewUnsolvedquery.php?idThread=512446&amp;idForum=1&amp;lp=ende&amp;lang=de</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0630.html" title="20110630"
             >next</a> |</li>
        <li class="right" >
          <a href="0625.html" title="20110625"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2011/0627.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2011/0627.html">Online Link</a>
    </div>
  </body>
</html>