<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20111028 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20111029" href="1029.html" />
    <link rel="prev" title="20111027" href="1027.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1029.html" title="20111029"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1027.html" title="20111027"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20111028<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="connecting-to-the-bcss">
<h2>Connecting to the BCSS<a class="headerlink" href="#connecting-to-the-bcss" title="Permalink to this headline">¶</a></h2>
<p>I wrote a new module <a class="reference external" href="http://www.lino-framework.org/api/lino.utils.xmlgen.html#module-lino.utils.xmlgen" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.utils.xmlgen</span></code></a> which I prefer over
<a class="reference external" href="http://www.lino-framework.org/ref/links.html#term-generateds" title="(in Lino v1.6)"><span class="xref std std-term">generateDS</span></a> or <cite>appy.Object</cite> for generating
the XML of <a class="reference external" href="http://www.lino-framework.org/ref/links.html#term-bcss" title="(in Lino v1.6)"><span class="xref std std-term">BCSS</span></a> requests.</p>
<p>This is finally how I actually <em>enjoy</em> writing BCSS requests!</p>
<p>But of course it&#8217;s possible that my fascination is due to my naiveness,
since I have no serious experience with XML. So I asked Gaëtan for his opinion:</p>
<blockquote>
<div><p>voici donc deux modules qui font en principe la même chose mais de
manière différente.</p>
<p>test5.py est ce que nous avions commencé ensemble. Cela ne marche pas
encore tout-à-fait à cause du petit problème avec ANY.</p>
<p>Mais indépendamment de cela, je n&#8217;aimais pas la quantité de code que je
dois écrire et maintenir pour générer ma requête. Hier je me suis donc
lancé dans mon idée dont tu vois le résultat dans la test6.py</p>
<p>Note que les deux tests appellent des services différents:</p>
<ul class="simple">
<li>test5.py HeatingAllocation</li>
<li>test6.py PerformInvestigation</li>
</ul>
<p>c&#8217;est dommage car il faut maintenant comparer des pommes à des oranges,
cela vient du fait qu&#8217;entre temps Gerd et moi avons compris que
PerformInvestigation est plus urgente que HeatingAllocation...</p>
<p>Malgré cela je trouve que l&#8217;avantage de mon xmlgen au point de vue
clarté du code est bien visible.</p>
<p>Question pour toi: qu&#8217;en penses-tu? As-tu des exemples de XML que
j&#8217;aurais difficile à générer avec mon système?</p>
</div></blockquote>
</div>
<div class="section" id="a-little-bug">
<h2>A little bug<a class="headerlink" href="#a-little-bug" title="Permalink to this headline">¶</a></h2>
<p>Read-only checkboxes are only grey but not read-only.
Seems that this is due to a bug in ExtJS.
For example on the Detail of a JobProvider, if you activate the
checkbox is_courseprovider and click on Save, you get:</p>
<div class="highlight-python"><div class="highlight"><pre>ERROR A JobProvider cannot be parent for a CourseProvider
Traceback (most recent call last):
  File &quot;t:\hgwork\lino\lino\ui\extjs3\ext_store.py&quot;, line 651, in form2obj
    f.form2obj(request,instance,form_values,is_new)
  File &quot;t:\hgwork\lino\lino\ui\extjs3\ext_store.py&quot;, line 124, in form2obj
    self.set_value_in_object(request,instance,v)
  File &quot;t:\hgwork\lino\lino\utils\mti.py&quot;, line 187, in set_value_in_object
    insert_child(obj,self.child_model)
  File &quot;t:\hgwork\lino\lino\utils\mti.py&quot;, line 123, in insert_child
    obj.__class__.__name__,child_model.__name__))
Exception: A JobProvider cannot be parent for a CourseProvider
</pre></div>
</div>
<p>Changed this (in <a class="reference external" href="http://www.lino-framework.org/api/lino.utils.mti.html#lino.utils.mti.insert_child" title="(in Lino v1.6)"><code class="xref py py-func docutils literal"><span class="pre">lino.utils.mti.insert_child()</span></code></a>) to raise a
ValidationError instead of an Exception.</p>
<p>Also removed the assertion <code class="docutils literal"><span class="pre">assert</span> <span class="pre">child_model</span> <span class="pre">!=</span> <span class="pre">obj.__class__</span></code>
(which occurred today) because in that case we would simply not find
any <cite>parent_link_field</cite>, which would lead to the validation error
&#8220;A CourseProvider cannot be parent for a CourseProvider&#8221;</p>
<p>This bug</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1029.html" title="20111029"
             >next</a> |</li>
        <li class="right" >
          <a href="1027.html" title="20111027"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2011/1028.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2011/1028.html">Online Link</a>
    </div>
  </body>
</html>