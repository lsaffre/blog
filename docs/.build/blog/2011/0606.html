<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110606 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110607" href="0607.html" />
    <link rel="prev" title="20110605" href="0605.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0607.html" title="20110607"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0605.html" title="20110605"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110606<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="zu-schnell-geschossen">
<h2>Zu schnell geschossen<a class="headerlink" href="#zu-schnell-geschossen" title="Permalink to this headline">¶</a></h2>
<p>Upps, in der Tat, bei meinem <a class="reference external" href="http://code.djangoproject.com/ticket/16151">Django ticket #16151</a>
hatte ich zu schnell geschossen.
Die beiden Meldungen &#8220;No fixtures found&#8221; kam ja nur,
weil in <a class="reference external" href="http://www.lino-framework.org/ref/glossary.html#term-initdb" title="(in Lino v1.6)"><span class="xref std std-term">initdb</span></a> sowohl das <cite>syncdb</cite> als auch das <cite>flush</cite>
jeweils ein <cite>loaddata initial_data</cite> aufriefen (was ich ja nun durch das undokumentierte <cite>load_initial_data=False</cite>) vermeide).
Meine Änderung im Django-Code hatte mir geholfen,
das zu verstehen. Sie funktionierte aber nur zufällig,
weil es zwei Aufrufe mit jeweils einem Argument waren.</p>
</div>
<div class="section" id="test-suite">
<h2>Test-Suite<a class="headerlink" href="#test-suite" title="Permalink to this headline">¶</a></h2>
<p>Die Tests in test_apps führen ja ein richtiges Schattendasein.
(Ich jedenfalls habe sie schon ewig nicht mehr laufenlassen...)
Deshalb suche ich nach einem System, um sie alle hintereinander
laufenzulassen, ohne dabei in der settings.py rumkommentieren
zu müssen.</p>
<p>Hier noch was für die Todo-Liste bei Gelegenheit:
Wenn ich ein Model importiere, das gar nicht installiert ist
(also dessen &#8220;application&#8221; nicht in INSTALLED_APPS drin ist).
In diesem Fall wird keine Tabelle in der Datenbank erstellt.
Aber wie kann ich das testen?
Lino sollte für solche Modelle keinen Report machen.</p>
<p>Checkin 20110606</p>
</div>
<div class="section" id="lino-apps-igen-no-longer-depends-on-django-ticket-10808">
<h2><code class="xref py py-mod docutils literal"><span class="pre">lino.apps.igen</span></code> no longer depends on <a class="reference external" href="http://code.djangoproject.com/ticket/10808">Django ticket #10808</a><a class="headerlink" href="#lino-apps-igen-no-longer-depends-on-django-ticket-10808" title="Permalink to this headline">¶</a></h2>
<p>Die Tests von <code class="xref py py-mod docutils literal"><span class="pre">lino.apps.igen</span></code> funktionieren weiterhin nicht
(<cite>ValidationError: {&#8216;journal&#8217;: [u&#8217;This field cannot be null.&#8217;]}</cite>),
unser altbekanntes <a class="reference external" href="http://code.djangoproject.com/ticket/10808">Django ticket #10808</a>.</p>
<p>Soll ich ihnen wenigstens den Patch anpassen?
Updated to revision 16331.
Aber die Arbeit lohnt sich nicht,
solange mtredinnick Bedenken hat.
Ich habe ja meine Erfahrungen mit Django.</p>
<p>Aber jetzt bin ich es Leid, darauf zu warten, jetzt umgehe ich es:
Änderungen in
<code class="xref py py-meth docutils literal"><span class="pre">lino.modlib.sales.models.Journal.create_document()</span></code>
und in
<code class="xref py py-meth docutils literal"><span class="pre">lino.modlib.sales.fixtures.demo()</span></code>.
In der demo fixture kann ich deswegen nicht den Instantiator
verwenden, weil der ja nicht ahnen kann, dass er
<cite>Journal.create_document &lt;lino.modlib.journals.models.Journal.create_document&gt;</cite>
verwenden muss. Schade.</p>
<p>Checkin 20110606b.</p>
</div>
<div class="section" id="noch-ein-bug">
<h2>Noch ein Bug<a class="headerlink" href="#noch-ein-bug" title="Permalink to this headline">¶</a></h2>
<p>Noch ein Bug weniger:
wenn man in einem RichTextField inline etwas änderte und
dann auf &#8220;Edit text in own window&#8221; klickte (um mehr
Formatierungsmöglichkeiten zu haben), dann wurden die Änderungen
nicht ins eigene Fenster übernommen.</p>
<p>Checkin 20110606c.</p>
</div>
<div class="section" id="small-changes-for-brussels">
<h2>Small changes for Brussels<a class="headerlink" href="#small-changes-for-brussels" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Translations to french (in .po files and in fixtures)</li>
<li>Less chaotic structure of configuration menu</li>
<li><code class="xref py py-attr docutils literal"><span class="pre">lino.apps.dsbe.models.StudyType.name</span></code> is now a babel field.</li>
<li>New field <code class="xref py py-attr docutils literal"><span class="pre">lino.modlib.users.models.User.is_expert</span></code>.</li>
<li>initdb didn&#8217;t modify existing tables. I had to quasi reimplement the reset command.
initdb does now a manual DROP TABLE for all tables in all applications.</li>
</ul>
<p>Checkin 20110606d.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0607.html" title="20110607"
             >next</a> |</li>
        <li class="right" >
          <a href="0605.html" title="20110605"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2011/0606.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2011/0606.html">Online Link</a>
    </div>
  </body>
</html>