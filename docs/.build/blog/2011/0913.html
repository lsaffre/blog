<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110913 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110914" href="0914.html" />
    <link rel="prev" title="20110912" href="0912.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0914.html" title="20110914"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0912.html" title="20110912"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110913<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h1>
<p>Continued with <code class="xref std std-manage docutils literal"><span class="pre">pp2lino</span></code>.</p>
<p>The <a class="reference external" href="http://www.lino-framework.org/api/lino.mixins.html#lino.mixins.ProjectRelated" title="(in Lino v1.6)"><code class="xref py py-class docutils literal"><span class="pre">lino.mixins.ProjectRelated</span></code></a> mixin was added to
<code class="xref py py-class docutils literal"><span class="pre">lino.modlib.cal.models.Event</span></code>
and
<code class="xref py py-class docutils literal"><span class="pre">lino.modlib.cal.models.Task</span></code>
only in <code class="xref py py-mod docutils literal"><span class="pre">lino.apps.dsbe.models</span></code>.
Now that&#8217;s done already in the modlib,
and they are no longer are abstract there.
Seems more practical.</p>
<p>If something went wrong while loading data using
<code class="xref py py-mod docutils literal"><span class="pre">lino.utils.dpy.Deserializer</span></code>, it now gives more useful information:</p>
<div class="highlight-python"><div class="highlight"><pre>...
INFO Saved 3711 instances from /var/snapshots/lino/lino/apps/dsbe/fixtures/pp2lino.py.
INFO Trying again with 12128 unsaved instances.
INFO Deferred Event #4 (u&#39;Event #4&#39;) : {&#39;start_time&#39;: [u&#39;Saisissez une heure valide au format HH:MM[:ss[.uuuuuu]].&#39;]}
INFO Deferred Event #4491 (u&#39;Event #4491&#39;) : {&#39;start_date&#39;: [u&#39;Ce champ ne peut pas \xeatre vide.&#39;]}
INFO Deferred Event #269 (u&#39;Event #269&#39;) : (1048, &quot;Column &#39;created&#39; cannot be null&quot;)
INFO Deferred Event #3040 (u&#39;Event #3040&#39;) : {&#39;start_time&#39;: [u&#39;Saisissez une heure valide au format HH:MM[:ss[.uuuuuu]].
&#39;], &#39;start_date&#39;: [u&#39;Ce champ ne peut pas \xeatre vide.&#39;]}
INFO Saved 0 instances.
Problem installing fixture &#39;/var/snapshots/lino/lino/apps/dsbe/fixtures/pp2lino.py&#39;: Traceback (most recent call last):
  File &quot;/var/snapshots/django/django/core/management/commands/loaddata.py&quot;, line 175, in handle
    for obj in objects:
  File &quot;/var/snapshots/lino/lino/utils/dpy.py&quot;, line 383, in deserialize
    raise Exception(msg)
Exception: Abandoning with 12128 unsaved instances from /var/snapshots/lino/lino/apps/dsbe/fixtures/pp2lino.py:
- cal.Event {&#39;start_time&#39;: [u&#39;Saisissez une heure valide au format HH:MM[:ss[.uuuuuu]].&#39;]} (11801 object(s), e.g. Event(id=4,project=1169L,must_build=True,calendar=1L,start_date=datetime.date(2006, 1,24),start_time=u&#39;1899-12-30&#39;,type=2L))
- cal.Event {&#39;start_date&#39;: [u&#39;Ce champ ne peut pas \xeatre vide.&#39;]} (62 object(s), e.g. Event(id=4491,must_build=True,calendar=1L,type=2L))
- cal.Event (1048, &quot;Column &#39;created&#39; cannot be null&quot;) (264 object(s), e.g. Event(id=269,modified=datetime.datetime(2011,9, 13, 10, 7, 39,602653),project=1374L,must_build=True,calendar=1L, start_date=datetime.date(2006, 3, 27),type=6L))
- cal.Event {&#39;start_time&#39;: [u&#39;Saisissez une heure valide au format HH:MM[:ss[.uuuuuu]].&#39;], &#39;start_date&#39;: [u&#39;Ce champ ne peut pas \xeatre vide.&#39;]} (1 object(s), e.g. Event(id=3040,project=1503L,must_build=True,calendar=1L,start_time=u&#39;1899-12-30&#39;,type=3L))
INFO Lino initdb done (&#39;std&#39;, &#39;all_countries&#39;, &#39;pp2lino&#39;) on database mysite.
</pre></div>
</div>
<p>That is, instead of issuing 12128 error messages,
it now groups them by model and message
and shows only the fist message of each group.
In the above case the 12128 messages were reduced to 4.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0914.html" title="20110914"
             >next</a> |</li>
        <li class="right" >
          <a href="0912.html" title="20110912"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2011/0913.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2011/0913.html">Online Link</a>
    </div>
  </body>
</html>