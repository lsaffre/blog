<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110906 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110907" href="0907.html" />
    <link rel="prev" title="20110902" href="0902.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0907.html" title="20110907"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0902.html" title="20110902"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110906<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="minor-bugfixes">
<h2>Minor bugfixes<a class="headerlink" href="#minor-bugfixes" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Fixed the bug &#8220;Switching off an
<cite>mti.EnableChild</cite> deletes related objects&#8221;
(discovered <a class="reference external" href="http://www.lino-framework.org0831.html">0831</a>).
If you now switch off the ´is_courseprovider´ field of a Company,
and if that Company (as a CourseProvider) has Courses defined,
then you&#8217;ll get a ValidationError &#8220;Cannot delete &lt;name of
CourseProvider&gt; because it has at least one course&#8221;.</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">disabled_fields()</span></code> of <code class="xref py py-class docutils literal"><span class="pre">lino.modlib.jobs.models.Job</span></code>:
Stelle bearbeiten können wenn noch kein <em>ausgedruckter</em> Vertrag vorliegt.</li>
</ol>
<p>Checkin 20110906.</p>
</div>
<div class="section" id="general-lino-test-suite">
<h2>General Lino test suite<a class="headerlink" href="#general-lino-test-suite" title="Permalink to this headline">¶</a></h2>
<p>The general Lino test suite (<code class="docutils literal"><span class="pre">make</span> <span class="pre">test</span></code> in root of Lino&#8217;s source tree)
was broken. Now almost ready again.</p>
<p>The biggest problem was that <code class="xref py py-mod docutils literal"><span class="pre">lino.test_apps.mti</span></code> used <cite>users</cite>
but not <cite>contacts</cite>. And users now depends on contacts.
New feature: It is now possible to define a userless site by setting
<code class="xref py py-attr docutils literal"><span class="pre">lino.Lino.user_model</span></code> to <cite>None</cite>.</p>
<p>One problem renains while
installing fixture <code class="xref py py-mod docutils literal"><span class="pre">lino.apps.dsbe.fixtures.demo</span></code>,
&#8220;Failed to save independent CourseContent #1 (u&#8217;Deutsch&#8217;). Abandoned.&#8221;</p>
<p>Checkin 20110906b.</p>
</div>
<div class="section" id="new-module-lino-modlib-isip">
<h2>New module <code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.isip</span></code><a class="headerlink" href="#new-module-lino-modlib-isip" title="Permalink to this headline">¶</a></h2>
<p>Es gibt jetzt zwei Arten von Verträgen: VSE-Verträge
(<code class="xref py py-class docutils literal"><span class="pre">lino.modelib.isip.models.Contract</span></code>)
und Arbeitsverträge
(<code class="xref py py-class docutils literal"><span class="pre">lino.modelib.jobs.models.Contract</span></code>).
Dass die bisher in einer einzigen Tabelle waren, war
offenbar ein Analysefehler.
Beide Modelle haben zwar eine Serie von gemeinsamen Feldern
(<code class="xref py py-class docutils literal"><span class="pre">lino.modelib.isip.models.ContractBase</span></code>),
aber eine gemeinsame Historik ist nicht nötig
(sondern die Benutzer wollen die beiden lieber klar getrennt
haben in zwei Tabellen im Reiter &#8220;Verträge&#8221; einer Person)</p>
<p>Technisches:
<cite>lino.modlib.jobs</cite> basiert auf <cite>lino.modlib.isip</cite> und nicht umgekehrt.
Deshalb sind die Modelle ExamPolicy und ContractEnding
jetzt in <cite>isip</cite>, nicht mehr in <cite>jobs</cite>.
Ein Modell <cite>ContractType</cite> gibt es in beiden Modulen.</p>
<p>Checkin 20110906c.</p>
</div>
<div class="section" id="data-migration">
<h2>Data migration<a class="headerlink" href="#data-migration" title="Permalink to this headline">¶</a></h2>
<p>The changes in <code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.isip</span></code> were again a beautiful
challenge of data migration. And Lino passed it bravely!</p>
<p>I discovered a new bug in dpy: content types were not correctly
handled. Serializer wrote just the id of the ContentType to the dump
file. That possibly failed because the contentypes table is populated
according to the new database structure and thus the pk&#8217;s of the
models may have changed.
This bug had already affected some data: there are 8 Task records
whose owner_type was &#8220;examination policy&#8221; instead of isip.Contract</p>
<p>Checkin 20110906d.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0907.html" title="20110907"
             >next</a> |</li>
        <li class="right" >
          <a href="0902.html" title="20110902"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2011/0906.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2011/0906.html">Online Link</a>
    </div>
  </body>
</html>