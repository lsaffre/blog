<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110521 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110523" href="0523.html" />
    <link rel="prev" title="20110520" href="0520.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0523.html" title="20110523"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0520.html" title="20110520"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110521<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="migrating-tups-to-mops">
<h2>Migrating <cite>tups</cite> to <cite>mops</cite><a class="headerlink" href="#migrating-tups-to-mops" title="Permalink to this headline">¶</a></h2>
<p>Weiter mit <a class="reference external" href="http://www.lino-framework.org/tickets/4.html">/tickets/4</a>.</p>
<p>Beim definitiven <cite>rsync</cite> waren einige Fehler im Stil:</p>
<div class="highlight-python"><div class="highlight"><pre>sys/module/via82cxxx/refcnt
ERROR: sys/module/via82cxxx/refcnt failed verification -- update discarded.
rsync: read errors mapping &quot;/sys/module/via82cxxx/refcnt&quot;: No data available (61)
</pre></div>
</div>
<p>Alle unter <cite>sys/module/*</cite>. Sind hoffentlich nicht schlimm.</p>
<p>6.15 Uhr : mops bedient jetzt <cite>saffre-rumma.net</cite>!
Apache funktioniert.
Sogar die DSBE-Demo.</p>
<p>Upps, aber Mailman scheint nicht zu funktionieren.
Eine Mail an <a class="reference external" href="mailto:testlist&#37;&#52;&#48;saffre-rumma&#46;net">testlist<span>&#64;</span>saffre-rumma<span>&#46;</span>net</a> kommt nicht durch.
Und auch keine Fehlermeldung per E-Mail.
Und wenn ich eine Mail an <a class="reference external" href="mailto:info&#37;&#52;&#48;saffre-rumma&#46;net">info<span>&#64;</span>saffre-rumma<span>&#46;</span>net</a> schicke, dann kommt die nicht an.
Ach nein, Fehlwarnung: Die testlist funktionierte offenbar
schon seit der Domain-Namensänderung nicht mehr. Einfach
<strong class="command">rmlist testlist</strong> und <strong class="command">newlist testlist</strong> gemacht, dann funktioniert es.</p>
<p>Hier ist noch ein Problem:</p>
<div class="highlight-python"><div class="highlight"><pre>luc@mops:~$ mail
mail: /tmp/mail.RxXXXXQhz6Ws: Permission denied
</pre></div>
</div>
<p>Vielleicht liegt das daran, dass in der Mail-Queue noch 12 Nachrichten stehen,
die schon vorher da standen:</p>
<div class="highlight-python"><div class="highlight"><pre># mailq
-Queue ID- --Size-- ----Arrival Time---- -Sender/Recipient-------
C644013467AC    11503 Mon May 16 08:17:41  MAILER-DAEMON
(Host or domain name not found. Name service error for name=mail.neti.ee type=MX: Host not found, try again)
                                         mailman-bounces@lsaffre.dyndns.org

1B57513467A4    11504 Thu May 19 08:17:42  MAILER-DAEMON
(delivery temporarily suspended: Host or domain name not found. Name service error for name=mail.neti.ee type=MX: Host n
ot found, try again)
                                         mailman-bounces@lsaffre.dyndns.org
(...)
</pre></div>
</div>
<p>Die lösche ich jetzt mal einfach alle:</p>
<div class="highlight-python"><div class="highlight"><pre># postsuper -d ALL
postsuper: Deleted: 12 messages
# mailq
Mail queue is empty
mops:/home/luc#
</pre></div>
</div>
<p>Aber das Problem ist noch immer da.</p>
<p>Grübel. Ach so:</p>
<div class="highlight-python"><div class="highlight"><pre>$ touch /tmp/foo
touch: cannot touch `/tmp/foo&#39;: Permission denied
</pre></div>
</div>
<p>Also Benutzer <cite>luc</cite> kann offenbar nicht ins <cite>/tmp</cite>
schreiben. Genau:</p>
<div class="highlight-python"><div class="highlight"><pre># ls -al /tmp
total 20
drwxr-xr-x  5 root root 4096 May 21 06:25 .
drwxr-xr-x 24 root root 4096 May 21 05:55 ..
drwxrwxrwt  2 root root 4096 May 21 04:57 .ICE-unix
drwxrwxrwt  2 root root 4096 May 21 04:57 .X11-unix
drwxrwxrwt  2 root root 4096 May 21 05:55 .font-unix
</pre></div>
</div>
<p>Ich probiere mal:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># chmod a+w /tmp</span>
</pre></div>
</div>
<p>Richtig, dadurch ist das Problem gelöst. Gelöst, aber nicht erklärt.
Also <cite>/tmp</cite> war nicht schreibbar für alle Benutzer.</p>
<p>Aber ist die jetzige Einstellung ok? (<code class="file docutils literal"><span class="pre">/tmp</span></code> einfach schreibbar
für alle gemacht)</p>
<p>Noch was: weiß Mops eigentlich, dass er 150 GB (statt der 50 GB auf
Tups) hat? Sieht so aus:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># df -h</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrade-lenny-to-squeeze">
<h2>Upgrade Lenny to Squeeze<a class="headerlink" href="#upgrade-lenny-to-squeeze" title="Permalink to this headline">¶</a></h2>
<p>Jetzt mach ich was, womit ich bewusst bis nach dem Umzug
gewartet hatte: ich upgrade von Lenny nach Squeeze.</p>
<p>Das geht ja normalerweise einfach, indem ich
in der <cite>/etc/apt/sources.list</cite> einfach das
<code class="docutils literal"><span class="pre">lenny''</span> <span class="pre">durch</span> <span class="pre">``squeeze</span></code> ersetze.</p>
<p>Aber vorher erstmal den Lenny auf den neuesten Stand bringen:</p>
<div class="highlight-python"><div class="highlight"><pre>mops:~# aptitude dist-upgrade
Reading package lists... Done
Building dependency tree
Reading state information... Done
Reading extended state information
Initializing package states... Done
Reading task descriptions... Done
The following NEW packages will be installed:
  libdns58{a} libisc50{a}
The following packages will be REMOVED:
  libdns55{u} libisc52{a}
The following packages will be upgraded:
  apache2 apache2-mpm-prefork apache2-utils apache2.2-common base-files bind9-host bzip2 dnsutils dpkg dpkg-dev
  dselect git-core imagemagick libapache2-svn libaprutil1 libbind9-50 libbz2-1.0 libc6 libc6-dev libfreetype6
  libgadu3 libisccc50 libisccfg50 libkrb53 libldap-2.4-2 liblwres50 libmagick10 libmysqlclient15off libnss3-1d
  libperl5.10 libpoppler-glib3 libpoppler3 libpq5 libsmbclient libsplashy1 libssl0.9.8 libsvn1 libwbclient0 libxml2
  linux-libc-dev locales man-db mysql-client mysql-client-5.0 mysql-common mysql-server mysql-server-5.0 openssl
  perl perl-base perl-modules perl-suid perlmagick phpmyadmin poppler-utils postgresql postgresql-8.3
  postgresql-client postgresql-client-8.3 postgresql-contrib postgresql-contrib-8.3 postgresql-doc
  postgresql-doc-8.3 python-subversion samba samba-common samba-doc smbclient smbfs spamassassin spamc subversion
  subversion-tools swat tzdata xpdf xpdf-common xpdf-reader xvfb
The following packages are RECOMMENDED but will NOT be installed:
  libsvn-perl xbase-clients
79 packages upgraded, 2 newly installed, 2 to remove and 0 not upgraded.
Need to get 132MB of archives. After unpacking 8868kB will be used.
</pre></div>
</div>
<p>Und ein paar unnütze Pakete rausholen:</p>
<div class="highlight-python"><div class="highlight"><pre>aptitude remove udev gnome-mount hal initramfs-tools pcscd samba swat
</pre></div>
</div>
<p>Und dann fällt mir ein: bevor ich mops nach Squeeze upgrade,
sollte ich lernen, ein Backup des Containers zu machen.
Also erst noch was zu lesen:</p>
<ul class="simple">
<li><a class="reference external" href="http://pve.proxmox.com/wiki/Backup_-_Restore_-_Live_Migration">Backup - Restore - Live Migration</a></li>
<li><a class="reference external" href="http://pve.proxmox.com/wiki/Storage_Model">Storage Model</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0523.html" title="20110523"
             >next</a> |</li>
        <li class="right" >
          <a href="0520.html" title="20110520"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2011/0521.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2011/0521.html">Online Link</a>
    </div>
  </body>
</html>