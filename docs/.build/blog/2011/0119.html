<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110119 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110120 ShowOrCreateButton" href="0120.html" />
    <link rel="prev" title="20110118" href="0118.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0120.html" title="20110120 ShowOrCreateButton"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0118.html" title="20110118"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110119<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<ol class="arabic">
<li><p class="first">Die Felder <cite>Adelstitel</cite> und <cite>eID-Karte ausgestellt durch</cite> sind jetzt
ebenfalls in Reiter 1 von Personen sichtbar.</p>
</li>
<li><p class="first">Der sogenannte Cache-Bug (sh. <a class="reference external" href="http://code.google.com/p/lino/source/browse/docs/blog/2011/0110.rst">2011-01-10</a>) ist doch noch
da, aber in anderer Form:</p>
<blockquote>
<div><p>Wenn ich einen Suchbegriff in die Schnellsuche eintrage, kann ich
nicht (mehr) in den gefilterten Seiten blättern. Beim ersten Wechsel
auf die nächste Seite wird der Filter entfernt.
Das kommt, weil &#8216;query&#8217; jetzt nicht mehr in den baseParams
der Grid ist</p>
</div></blockquote>
<p>Also nochmal:</p>
<p>Das Konzept &#8220;base params&#8221; habe ich von ExtJS übernommen und damit
sind die Parameter gemeint, die ein Store von einem reload zum anderen
beibehält. get_base_params() sollte das nicht ändern,
sondern in GridPanel nur ein thin Wrapper sein
und für FormPanel das gleiche Konzept implementieren.</p>
<p>Mit &#8220;master params&#8221; meine ich die beiden Parameter mt und mk, die
ein slave query nötig hat um seinen master zu identifizieren.
get_master_params() gibt mk und mt des aktuellen Records zurück
und wird gebraucht um einen Slave an seinen Master zu binden.</p>
<p>Ein slave report hat in seinen base_params die master params
seines callers, die (für ihn) dann auch base params i.e.S. werden.</p>
<p>In diesem Denksystem fehlt scheinbar noch was, oder
zumindest ist der Name get_master_params offenbar irreführend.</p>
<p>Der Suchtext muss jedenfalls auch in den base params stehen,
damit die Navigatorfunktion erhalten bleibt.</p>
<p>Irgendwo hole ich mir beim Erstellen eines Slave-Reports
fälschlicherweise die base params statt der master params.</p>
<p>Nach anderthalb Stunden Sucherei ist der Schuldige gefunden:
<cite>Lino.GridPanel.constructor</cite> machte folgendes, um die base
params der Grid zu setzen:</p>
<div class="highlight-python"><div class="highlight"><pre>var bp = Ext.apply({ fmt:&#39;json&#39; },ww.config.base_params);
</pre></div>
</div>
<p>Das darf sie aber nur fürs main item tun. Ungefähr so:</p>
<div class="highlight-python"><div class="highlight"><pre>var bp = { fmt:&#39;json&#39; }
if (ww.main_item == this) {
    // this gridpanel is the main component
    Ext.apply(bp,ww.config.base_params);
}
</pre></div>
</div>
</li>
<li><p class="first">En passant:</p>
<ul class="simple">
<li>Der Schnellsuch-Text wurde nicht mehr im permalink gespeichert.
Behoben.</li>
<li>Außerdem wird jetzt erstmals der Schnellsuch-Text aus dem Permalink
in das entsprechende Eingabefeld übernommen.</li>
</ul>
</li>
</ol>
<p>Die restlichen 4 Stunden des Tages habe ich mit dem Schnellhochladeknopf
quick upload button) für Führerschein, Aufenthalts- und Arbeitsgenehmigung
verbracht. Siehe <a class="reference external" href="http://www.lino-framework.org0120.html">0120</a>.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0120.html" title="20110120 ShowOrCreateButton"
             >next</a> |</li>
        <li class="right" >
          <a href="0118.html" title="20110118"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2011/0119.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2011/0119.html">Online Link</a>
    </div>
  </body>
</html>