<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20110823 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2011" href="index.html" />
    <link rel="next" title="20110824" href="0824.html" />
    <link rel="prev" title="20110822" href="0822.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0824.html" title="20110824"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0822.html" title="20110822"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2011</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20110823<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Continued to work on <a class="reference external" href="https://github.com/lsaffre/lino/blob/master/docs/tickets/48">docs/tickets/48</a>.</p>
<ul class="simple">
<li>renamed Attendance to Attendee and AttendanceRole to AttendeeRole
because an &#8220;attendance role&#8221; is a sheet where attendees write their name.
AttendeeRole is the role attributed to an attendee.</li>
<li>Attendee is a <code class="xref py py-class docutils literal"><span class="pre">lino.modlib.contacts.models.ContactDocument</span></code>, not a
<code class="xref py py-class docutils literal"><span class="pre">lino.modlib.contacts.models.PartnerDocument</span></code>.</li>
<li>New <code class="docutils literal"><span class="pre">demo</span></code> fixture for <cite>lino.modlib.cal</cite> adds some
examples of <code class="xref py py-class docutils literal"><span class="pre">lino.modlib.cal.models.AttendeeRole</span></code>.</li>
<li><a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.users.models.html#lino.modlib.users.models.User" title="(in Lino v1.6)"><code class="xref py py-class docutils literal"><span class="pre">lino.modlib.users.models.User</span></code></a> is now also a Contact.
We changed the default value of <cite>next_partner_id</cite>
from 1 to 100, otherwise the demo fixtures would fail
when creating a first Person because the users demo fixture
had previously created
some users who got ids 1, 2 and 3.</li>
</ul>
<div class="section" id="different-contacts-with-same-email-address">
<h2>Different Contacts with same email address<a class="headerlink" href="#different-contacts-with-same-email-address" title="Permalink to this headline">¶</a></h2>
<p>What happens it two contacts have the same email address?
The first version of <code class="xref py py-mod docutils literal"><span class="pre">lino.modlib.email</span></code> (before
<a class="reference external" href="http://www.lino-framework.org/tickets/48.html">yesterday</a>)
showed all emails on each contact because MailsByPerson and
MailsByCompany were based on the email address field of Recipient.
The new version not, it shows the emails based on the contact
ForeignKey field of Recipient.
This behaviour seems more user-friendly, but we will have a
problem for triaging incoming mails: if a recipient&#8217;s address
exists on more than one Contact, Lino will have to decide which
of them to use as ForeignKey.</p>
<p>Two contacts having the same email address should be rare in practice:</p>
<ul class="simple">
<li>Small companies sometimes use the email address of one of
their employees as primary contact address.</li>
<li>Wife and husband using a common address.</li>
</ul>
<p>One possibility is to add a checkbox field &#8220;uses email address of another
contact&#8221;, which would cause incoming mails to be attributed to the other
contact.</p>
</div>
<div class="section" id="recurrent-events">
<h2>Recurrent events<a class="headerlink" href="#recurrent-events" title="Permalink to this headline">¶</a></h2>
<p>New model <code class="xref py py-class docutils literal"><span class="pre">lino.modlib.cal.models.RecurrenceSet</span></code>.
Lino has started to support recurrent events,
<a class="reference external" href="http://www.lino-framework.org/ref/glossary.html#term-watch-calendars" title="(in Lino v1.6)"><span class="xref std std-term">watch_calendars</span></a> extracts more and more info from a google calendar.
There&#8217;s still a lot to do.</p>
</div>
<div class="section" id="projects">
<h2>Projects<a class="headerlink" href="#projects" title="Permalink to this headline">¶</a></h2>
<p>A spontaneous idea shortly before stopping for today:
the new <a class="reference external" href="http://www.lino-framework.org/api/lino.mixins.html#lino.mixins.ProjectRelated" title="(in Lino v1.6)"><code class="xref py py-class docutils literal"><span class="pre">lino.mixins.ProjectRelated</span></code></a> mixin.
It&#8217;s a mixin which <em>sometimes</em> (if <code class="xref py py-attr docutils literal"><span class="pre">lino.Lino.projects_model</span></code>
is set) adds a foreignkey field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ProjectRelated</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">LINO</span><span class="o">.</span><span class="n">projects_model</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">LINO</span><span class="o">.</span><span class="n">projects_model</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This is to be used instead of making models like
Note, Link, Event, Task abstract just
to be able to link them to &#8220;something application specific&#8221;
(in Lino/DSBE this is a person and/or company
but in fact they always just wanted a person: 14 of 1000
notes currently have a nonempty company field).</p>
<p>In a first step we use this just for Tasks and Events.</p>
</div>
<div class="section" id="database-migration-to-1-2-2">
<h2>Database migration to 1.2.2<a class="headerlink" href="#database-migration-to-1-2-2" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s time for a release because the database migration to 1.2.2
is getting quite complex after all these changes.
Added <code class="xref py py-func docutils literal"><span class="pre">lino.apps.dsbe.migrate.migrate_from_1_2_1()</span></code>.
Tested on a recent dump of real data.</p>
<p>Check-in 20110823</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0824.html" title="20110824"
             >next</a> |</li>
        <li class="right" >
          <a href="0822.html" title="20110822"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2011</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2011/0823.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2011/0823.html">Online Link</a>
    </div>
  </body>
</html>