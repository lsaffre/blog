<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20130905 (Thursday, 05 September 2013) &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2013" href="index.html" />
    <link rel="next" title="20130906 (Friday, 06 September 2013)" href="0906.html" />
    <link rel="prev" title="20130904 (Wednesday, 04 September 2013)" href="0904.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0906.html" title="20130906 (Friday, 06 September 2013)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0904.html" title="20130904 (Wednesday, 04 September 2013)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2013</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="thursday-05-september-2013">
<h1>20130905 (Thursday, 05 September 2013)<a class="headerlink" href="#thursday-05-september-2013" title="Permalink to this headline">¶</a></h1>
<p>Optimized the detail of <span class="xref std std-ref">Reception &#8211;&gt; Clients</span>.</p>
<ul class="simple">
<li>Changed the layout so that the photo is now relatively visible.</li>
<li><code class="xref py py-class docutils literal"><span class="pre">lino.mixins.beid.BeIdCardHolder</span></code>:
<cite>eid_info</cite> now adds the &#8220;Must read eID card!&#8221; message also when the
<cite>card_valid_until</cite> has passed.
And uses red background color when that message appears.
And <cite>card_valid_until</cite> is bold when it has passed.</li>
<li>the eid card fields are no longer disabled for
<a class="reference external" href="http://www.lino-framework.org/dev/perms.html#userlevels-admin" title="(in Lino v1.6)"><span>admin</span></a>.
(Ouch, that innocent &#8220;<a class="reference external" href="http://www.lino-framework.org/dev/perms.html#userlevels-admin" title="(in Lino v1.6)"><span>admin</span></a>&#8221;
inadvertently made me dive into writing documentation
about <a class="reference external" href="http://www.lino-framework.org/dev/perms.html#permissions" title="(in Lino v1.6)"><span>Permissions</span></a> though there are more urgent things to do...)</li>
<li>New table <span class="xref std std-ref">welfare.pcsw.AllClients</span>
shows all columns.
Accessible for <a class="reference external" href="http://www.lino-framework.org/dev/perms.html#userlevels-admin" title="(in Lino v1.6)"><span>admin</span></a> via
<span class="menuselection">Explorer ‣ ÖSHZ ‣ Klienten</span>.
Use this for manually modifying eid card fields which are otherwise
nowhere.</li>
</ul>
<p>The fields <cite>started</cite> and <cite>stopped</cite> of
<span class="xref std std-ref">welfare.jobs.Experience</span>
and
<span class="xref std std-ref">welfare.jobs.Study</span>
are no longer MonthDields but normal DateFields.</p>
<ul class="simple">
<li>Gerd: &#8220;Manuelle Eingabe von Daten mit Punkt als Trenner geht nicht in
den Daten von den Berufserfahrungen und Ausbildungen.&#8221;
&#8211;
&#8220;Stimmt, das war, weil das Monatsfelder waren.
Monatsfelder sind in der Datenbankwie normale Datumsfelder abgelegt,
haben aber einen speziellen DatePicker.
Aber das funktionierte scheinbar nicht so richtig:
in der Tabellenansicht wurden trotzdem &#8220;normale&#8221;
Datumsfelder angezeigt, und beim Bearbeiten auch.
Habe die vier Felder jetzt auf normale Datumsfelder gesetzt.
Jetzt kann man diese Daten auf den Tag genau anzeigen.
Aber im Lebenslauf wird trotzdem nur der Monat gedruckt.&#8221;</li>
</ul>
<div class="section" id="fielderror-at-api-jobs-experiencesbyoffer">
<h2>FieldError at /api/jobs/ExperiencesByOffer<a class="headerlink" href="#fielderror-at-api-jobs-experiencesbyoffer" title="Permalink to this headline">¶</a></h2>
<p>Fixed a bug that occured in <a class="reference external" href="http://welfare.lino-framework.org/tested/jobs.html#welfare-jobs-experiencesbyoffer" title="(in Lino Welfare Reference Manual v1.1)"><span>Experiences by Job Offer</span></a>.
&#8220;Cannot resolve keyword u&#8217;date_submitted&#8217; into field. Choices are:
company, country, function, id, person, remarks, sector, started, stopped, title&#8221;</p>
<p>In fact the tables
<a class="reference external" href="http://welfare.lino-framework.org/tested/jobs.html#welfare-jobs-experiencesbyoffer" title="(in Lino Welfare Reference Manual v1.1)"><span>Experiences by Job Offer</span></a>
and
<a class="reference external" href="http://welfare.lino-framework.org/tested/jobs.html#welfare-jobs-candidaturesbyoffer" title="(in Lino Welfare Reference Manual v1.1)"><span>Candidatures by Job Offer</span></a>
simply didn&#8217;t work. Which never disturbed anybody because in Eupen they
don&#8217;t use <a class="reference external" href="http://welfare.lino-framework.org/tested/jobs.html#welfare-jobs-offers" title="(in Lino Welfare Reference Manual v1.1)"><span>Job Offers</span></a>.</p>
<ul class="simple">
<li>My first use of the
<a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/models/options/#get-latest-by">get_latest_by</a>
meta option
and the <code class="xref py py-meth docutils literal"><span class="pre">django.db.models.query.QuerySet.latest()</span></code> method.</li>
<li>New document <a class="reference external" href="http://welfare.lino-framework.org/tested/jobs.html#welfare-tested-jobs" title="(in Lino Welfare Reference Manual v1.1)"><span>Jobs</span></a></li>
<li>I rediscovered <code class="xref py py-mod docutils literal"><span class="pre">atelier.doctest_utf8</span></code></li>
</ul>
</div>
<div class="section" id="a-specification-sheet-for-welfare">
<h2>A specification sheet for <a class="reference external" href="http://welfare.lino-framework.org/index.html#welfare" title="(in Lino Welfare Reference Manual v1.1)"><span>Lino Welfare</span></a><a class="headerlink" href="#a-specification-sheet-for-welfare" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Gerd reported that an important document had vanised.
Here it is again: <a class="reference external" href="http://fr.welfare.lino-framework.org/fiche_technique.html#welfare-whitepaper" title="(in Lino pour CPAS v1.1)"><span>Fiche technique Lino pour CPAS</span></a>.</li>
</ul>
</div>
<div class="section" id="user-docs-now-as-pdf-files">
<h2>User docs now as .pdf files<a class="headerlink" href="#user-docs-now-as-pdf-files" title="Permalink to this headline">¶</a></h2>
<p>Hier ganz zwischendurch im Stress vor der Demo
aus dem Ärmel geschüttelt mal was ganz Neues:
erstmals kann man das komplette Benutzerhandbuch als druckbare pdf-Datei
generieren.</p>
<ul class="simple">
<li>New fabric command <code class="docutils literal"><span class="pre">fab</span> <span class="pre">pdf</span></code> (See <a class="reference external" href="http://atelier.lino-framework.org/api/atelier.fablib.html#module-atelier.fablib" title="(in atelier v0.0)"><code class="xref py py-mod docutils literal"><span class="pre">atelier.fablib</span></code></a>) builds pdf
versions of the userdocs.</li>
</ul>
<p>The first example is
<a class="reference external" href="http://welfare-user.lino-framework.org/lino-userdocs.pdf">http://welfare-user.lino-framework.org/lino-userdocs.pdf</a></p>
<p>But there is still a lot to do:</p>
<ul class="simple">
<li>write useful content</li>
<li>translations</li>
<li>Infrastruktur (more tools to efficiently generate parts of the content)</li>
</ul>
<p>A first problem is that the translations don&#8217;t yet build. I get a
LaTeX error message:</p>
<div class="highlight-python"><div class="highlight"><pre>! Package inputenc Error: Unicode char \u8:ō not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...

l.4895 ...]{Tables based on Rōles de participant}
                                                  }
?
</pre></div>
</div>
</div>
<div class="section" id="termine-erstellen">
<h2>Termine erstellen<a class="headerlink" href="#termine-erstellen" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Wenn man versuchte, einen Termin für einen Klienten bei einem seiner
Begleiter zu machen, und wenn der Begleiter <em>kein Profil</em> hatte, dann
kam nach dem Klick auf OK scheinbar nichts (und unscheinbar ein
Traceback auf dem Server). Begleiter, die kein Benutzerprofil haben,
arbeiten nicht in Lino, also macht es keinen Sinn, für die einen Termin
in Lino zu erstellen. Für diese Begleiter zeigt Lino deshalb jetzt keinen
Button &#8220;Termin&#8221; mehr an.</li>
<li>Neuer Button &#8220;Termin mit...&#8221; in <span class="xref std std-ref">welfare.reception.Clients</span>.
Den braucht man um einen Termin bei einem Agenten zu erstellen,
der nicht Begleiter dieses Klienten ist.</li>
</ul>
</div>
<div class="section" id="printing-a-budget">
<h2>Printing a budget<a class="headerlink" href="#printing-a-budget" title="Permalink to this headline">¶</a></h2>
<p>Fixed two bugs in the template used to print a <span class="xref std std-ref">welfare.debts.Budget</span>:</p>
<ul class="simple">
<li>bei einem  Budgetausdruck (Nr. 73) kommt am Ende der Seite
&#8220;settings.SITE.site_version()&#8221;</li>
<li>und am Anfang beim Haushalt &#8220;actor.household.get_address(&#8216;, &#8216;)&#8221;</li>
</ul>
</div>
<div class="section" id="seeing-the-calendar-panel-of-another-user">
<h2>Seeing the Calendar Panel of another user<a class="headerlink" href="#seeing-the-calendar-panel-of-another-user" title="Permalink to this headline">¶</a></h2>
<p>Uff! I think I fixed a difficult bug.
Until now this possibility was accessed only through the
&#8220;Act as...&#8221; menu command which sets the global variable <cite>Lino.subst_user</cite>.
But the &#8220;Appointment&#8221; actions in each row of
<span class="xref std std-ref">welfare.reception.CoachingsByClient</span> use it differently,
they open the Lino.CalendarAppPanel with <cite>su</cite> as base parameter.
And Lino.CalendarAppPanel wasn&#8217;t yet designed to handle this situation.
Now it seems to work.</p>
<p>Since this kind of changes can cause bugs which are being reported only
weeks later, I try to explain what I did:
The panel called <cite>event_store.load()</cite> in its <cite>afterRender</cite>
listener. I had to remove this because it caused duplicate load calls.
Instead of this I  replaced the <cite>reload()</cite> cal in refresh() by <cite>load()</cite>
so that it works also on first invocation.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0906.html" title="20130906 (Friday, 06 September 2013)"
             >next</a> |</li>
        <li class="right" >
          <a href="0904.html" title="20130904 (Wednesday, 04 September 2013)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2013</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2013/0905.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2013/0905.html">Online Link</a>
    </div>
  </body>
</html>