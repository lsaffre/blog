<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20130819 (Monday, 19 August 2013) &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2013" href="index.html" />
    <link rel="next" title="20130820 (Tuesday, 20 August 2013)" href="0820.html" />
    <link rel="prev" title="20130818 (Sunday, 18 August 2013)" href="0818.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0820.html" title="20130820 (Tuesday, 20 August 2013)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0818.html" title="20130818 (Sunday, 18 August 2013)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2013</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="monday-19-august-2013">
<h1>20130819 (Monday, 19 August 2013)<a class="headerlink" href="#monday-19-august-2013" title="Permalink to this headline">¶</a></h1>
<div class="section" id="lino-welfare">
<h2>Lino-Welfare<a class="headerlink" href="#lino-welfare" title="Permalink to this headline">¶</a></h2>
<p>Continued on the <a class="reference external" href="http://www.lino-framework.org/todo.html">/todo</a>.</p>
<p><span class="menuselection">Neuanträge ‣ Klienten</span>: Reihenfolge und
Bezeichnungen der Felder für Filterparameter optimiert.
&#8220;Neue Klienten seit&#8221; war par défaut leer statt vor einem Monat.</p>
<p>Renamed ClientStates.coached to ClientStates.active.
Added a new interpretation rule of pcsw.Clients.parameters:</p>
<blockquote>
<div><p>Zum Feld &#8220;Beobachtungskriterium&#8221; in den Filterparametern von Klienten:</p>
<p>Der Standardwert hieß bisher &#8220;Begleitet&#8221;.
Den habe ich umbenannt nach &#8220;Aktiv&#8221;.
Es bedeutet &#8220;sowohl Begleitete als auch Neuanträge&#8221;.</p>
<p>Wenn man keine Periode angibt,
wurde dieses Feld bisher komplett ignoriert,
ab jetzt werden dann nur aktive Klienten angezeigt
(also keine Ehemaligen und keine Abgelehnteb).</p>
</div></blockquote>
<p>Added &#8220;yellow&#8221; to the list of supported row classes.
Renamed <cite>get_row_class</cite> to <cite>get_row_classes</cite> and added <cite>Renderer.row_classes_map</cite>.</p>
<p>Klienten, die als veraltet markiert sind, werden jetzt generell mit einem Sternchen
hinter der Partnernummer angezeigt.</p>
<p>Not pcsw.Person but only pcsw.Client is Printable.
And not Printable but just BasePrintable.</p>
<p>Das Info-Panel im Detail von Empfang &#8211;&gt; Klienten (client_info)
zeigt jetzt falls nötig eine anklickbare
Aufforderung &#8220;Muss eID-Karte einlesen!&#8221;</p>
<p>Die Titel der Tabellen in der Startseite sind jetzt wieder einfach
schwarz statt blau und anklickbar. Dahinter jeweils eine anklickbare
Ikone &#8220;Dieses Panel in eigenem Fenster öffnen&#8221;.</p>
</div>
<div class="section" id="reading-the-picture-from-a-belgian-eid-card">
<h2>Reading the picture from a Belgian eID card<a class="headerlink" href="#reading-the-picture-from-a-belgian-eid-card" title="Permalink to this headline">¶</a></h2>
<p>Continued from <a class="reference external" href="oops">2013-08-16</a>.
Still trying to reproduce the problem on
<a class="reference external" href="http://welfare-demo.lino-framework.org">welfare-demo</a>.</p>
<p>After reading a blog entry <a class="reference external" href="http://www.digitalia.be/news/eid-sous-ubuntu">eID sous Ubuntu</a>
by Christophe Beyls, I reinstalled middleware and viewer as he
instructs using packages from <a class="reference external" href="http://eid.belgium.be/fr/utiliser_votre_eid/installer_le_logiciel_eid/linux/">eid.belgium.be</a>,
but nope, that wasn&#8217;t the problem.
My client either freezes or says &#8220;Applet not found&#8221;.</p>
<p>After (re)discovering how to show the Java console
for IcedTea under Ubuntu 12.04
(see <a class="reference external" href="http://www.lino-framework.org/davlink/client.html">/davlink/client</a>)
I finally could visualize the reasons of the problem.</p>
<p>A first problem was:</p>
<div class="highlight-python"><div class="highlight"><pre>Aug 19, 2013 11:15:12 PM org.jdesktop.applet.util.JNLPAppletLauncher displayError
SEVERE: java.io.IOException: org.xml.sax.SAXException: no protocol: /media/eid-jslib/beid35JavaWrapper-linux.jar
</pre></div>
</div>
<p>The solution was to edit the <cite>.jnlp</cite> files on the server
to include the full URL address for <cite>codebase</cite>.</p>
<p>Second problem:</p>
<div class="highlight-python"><div class="highlight"><pre>[ERROR] UnsatisfiedLinkError: /tmp/jnlp-applet/jln1693967795930166374/jln7665424274621368038/libbeidlibJava_Wrapper.so: libbeidcommon.so.3: cannot open shared object file: No such file or directory
java.library.path = /usr/lib/chromium-browser:/usr/lib/chromium-browser/libs:/usr/java/packages/lib/i386:/usr/lib/jni:/lib:/usr/lib
java.class.path = /usr/lib/jvm/java-7-openjdk-i386/lib/rt.jar
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at sun.applet.PluginAppletSecurityContext$4.run(PluginAppletSecurityContext.java:670)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.applet.PluginAppletSecurityContext.handleMessage(PluginAppletSecurityContext.java:667)
        at sun.applet.AppletSecurityContextManager.handleMessage(AppletSecurityContextManager.java:68)
        at sun.applet.PluginStreamHandler.handleMessage(PluginStreamHandler.java:235)
        at sun.applet.PluginMessageHandlerWorker.run(PluginMessageHandlerWorker.java:78)
Caused by: java.lang.UnsatisfiedLinkError: be.belgium.eid.beidlibJava_WrapperJNI.BEID_ReaderSet_instance()J
        at be.belgium.eid.beidlibJava_WrapperJNI.BEID_ReaderSet_instance(Native Method)
        at be.belgium.eid.BEID_ReaderSet.instance(BEID_ReaderSet.java:37)
        at be.belgium.beid.BEID_Applet.InitLib(BEID_Applet.java:621)
        ... 10 more
</pre></div>
</div>
<p>No solution until now...</p>
</div>
<div class="section" id="setting-passwords-manually">
<h2>Setting passwords manually<a class="headerlink" href="#setting-passwords-manually" title="Permalink to this headline">¶</a></h2>
<p>Before finding how to show the Java console I suspected
that the beid applet refuses to start when
it detects to be running over non-secured http,
and so I set up a secured demo database to <cite>use_beid_jslib</cite>.
Here is how to manually set a password for a given user:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python manage.py shell
&gt;&gt;&gt; from lino.api.shell import *
&gt;&gt;&gt; u = users.User.objects.get(username=&#39;robin&#39;)
&gt;&gt;&gt; u.password
u&#39;!&#39;
&gt;&gt;&gt; u.set_password(&quot;1234&quot;)
&gt;&gt;&gt; u.save()
&gt;&gt;&gt; u.password
u&#39;pbkdf2_sha256$10000$KsU7cSfJbLDe$8rTzCjZMyR9/5Qx+zCUXPb84k77zW0F16od/TmFy7wk=&#39;
&gt;&gt;&gt;
</pre></div>
</div>
</div>
<div class="section" id="my-eidreader-applet-reading-estonian-eid-cards">
<h2>My EIDReader applet : Reading Estonian eID cards<a class="headerlink" href="#my-eidreader-applet-reading-estonian-eid-cards" title="Permalink to this headline">¶</a></h2>
<p>I suspect the complex combination of Java and Middleware
requirements to be the cause of many problems,
and wrote a proof of concept for a rather utopic solution:
write myself an applet that
reads public info from a Belgian eID card, directly using
<cite>javax.smartcardio</cite> and therefore without
need for any middleware or offical fedict eid-applet.</p>
<p>As a first step I started by reading an <em>Estonian</em> eID card
because I found a very helpful blog entry
<a class="reference external" href="http://blog.codeborne.com/2010/10/javaxsmartcardio-and-esteid.html">javax.smartcardio and EstEID</a>
written almost 3 years ago by Revo at codeborne. Thank you, Revo.</p>
<p>Another important document is the
official <a class="reference external" href="http://www.id.ee/public/TB-SPEC-EstEID-Chip-App-v3.4.pdf">EstEID card specification</a>
(found via
<a class="reference external" href="http://www.id.ee/index.php?id=30384">ID-kaardi dokumentatsioon</a>).</p>
<p>Result:
<a class="reference external" href="https://github.com/lsaffre/lino/blob/master//lino/media/applets/eid_test.html">/lino/media/applets/eid_test.html</a>
and
<a class="reference external" href="https://github.com/lsaffre/lino/blob/master//java/lino/eid/EIDReader.java">/java/lino/eid/EIDReader.java</a>.</p>
<p>Next steps would be to find out</p>
<ul class="simple">
<li>how to read the photo of an Estonian eID card</li>
<li>the command APDUs for Belgian eID cards</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0820.html" title="20130820 (Tuesday, 20 August 2013)"
             >next</a> |</li>
        <li class="right" >
          <a href="0818.html" title="20130818 (Sunday, 18 August 2013)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2013</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2013/0819.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2013/0819.html">Online Link</a>
    </div>
  </body>
</html>