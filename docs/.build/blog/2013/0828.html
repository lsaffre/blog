<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20130828 (Wednesday, 28 August 2013) &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2013" href="index.html" />
    <link rel="next" title="20130829 (Thursday, 29 August 2013)" href="0829.html" />
    <link rel="prev" title="20130827 (Tuesday, 27 August 2013)" href="0827.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0829.html" title="20130829 (Thursday, 29 August 2013)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0827.html" title="20130827 (Tuesday, 27 August 2013)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2013</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="wednesday-28-august-2013">
<h1>20130828 (Wednesday, 28 August 2013)<a class="headerlink" href="#wednesday-28-august-2013" title="Permalink to this headline">¶</a></h1>
<p>Started to tidy up the <a class="reference external" href="http://welfare.lino-framework.org/index.html#welfare" title="(in Lino Welfare Reference Manual v1.1)"><span>Lino Welfare</span></a> test suite.
One failure caused already some work and is still not fixed:</p>
<div class="highlight-python"><div class="highlight"><pre>FAIL: test_apnumber (django.contrib.humanize.tests.HumanizeTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/home/luc/pythonenvs/py27/local/lib/python2.7/site-packages/django/contrib/humanize/tests.py&quot;, line 121, in test_apnumber
    self.humanize_tester(test_list, result_list, &#39;apnumber&#39;)
  File &quot;/home/luc/pythonenvs/py27/local/lib/python2.7/site-packages/django/contrib/humanize/tests.py&quot;, line 47, in humanize_tester
    msg=&quot;%s test failed, produced &#39;%s&#39;, should&#39;ve produced &#39;%s&#39;&quot; % (method, rendered, result))
AssertionError: apnumber test failed, produced &#39;ein&#39;, should&#39;ve produced &#39;one&#39;
</pre></div>
</div>
<p>This is obviously because <cite>django.contrib.humanize</cite> is now in installed_apps.
And it seems that some tests there rely on the fact that the
language hasn&#8217;t been modified by previous test cases.
Which might well be the case since until now I didn&#8217;t have this requirement.
Removed <cite>set_language</cite> and replaced it by <cite>with translation.override(&#8216;de&#8217;)</cite>
constructs.</p>
<p>Uff, the reason for this is a bug in Django: :djangoticket`20059`.</p>
<p>I work around this by modifying <code class="xref py py-meth docutils literal"><span class="pre">north.Site.apply_language()</span></code></p>
<p>LANGUAGE_CODE is what <em>Django</em> believes to be the default language.
This should be some variant of English (&#8216;en&#8217; or &#8216;en-us&#8217;)
if you use <cite>django.contrib.humanize</cite></p>
<p>So there are two different &#8220;default languages&#8221; in a <span class="xref std std-ref">north</span>
application:</p>
<ul class="simple">
<li>the &#8220;developer&#8217;s&#8221; default language is the first element of
<code class="xref py py-attr docutils literal"><span class="pre">north.Site.languages</span></code>.</li>
<li>the &#8220;user&#8217;s&#8221; default language is the language returned by
<code class="xref py py-meth docutils literal"><span class="pre">north.Site.get_default_language()</span></code></li>
</ul>
<div class="section" id="baustellenbesichtigung-faggio">
<h2>Baustellenbesichtigung <a class="reference external" href="http://faggio.lino-framework.org/index.html#faggio" title="(in Lino Faggio Reference v0.0)"><span>Lino Faggio</span></a><a class="headerlink" href="#baustellenbesichtigung-faggio" title="Permalink to this headline">¶</a></h2>
<p>Hier meine Todo-Liste nach der Baustellenbesichtigung <a class="reference external" href="http://faggio.lino-framework.org/index.html#faggio" title="(in Lino Faggio Reference v0.0)"><span>Lino Faggio</span></a>.</p>
<ul class="simple">
<li>Für Einschreibungen fehlt das insert_layout</li>
<li>Pro Einschreibung den Preis in € manuell ändern können.</li>
<li>Tarife &amp; Sonderpreise :
in &#8220;Products&#8221; hätten wir &#8220;Bewegungskurse&#8221;, &#8220;Computerkurse&#8221;, &#8220;Sonstige&#8221;.
Pro Kurs würde der Listenpreis manuell festgelegt.</li>
<li>Die generierten Rechnungen müssen (bis auf weiteres) alle ohne MWSt
sein.</li>
<li>Auf Ausdruck der Rechnung soll die Liste der Termine stehen.</li>
<li>Stornierte Einschreibungen sollen nicht fakturiert werden.</li>
<li>Ankreuzfeld &#8220;Termine unter vorbehalt&#8221; pro Kurs?</li>
<li>Termine nicht einzeln bestätigen. Die Termine eines Kurses werden im
Büro geplant (z.B. prüfen, ob keine Feiertage drin sind) und dann mit
dem Kursleiter telefonisch abgesegnet. Also wenn Kurs auf Geplant
wechselt, soll Lino alle Termine auf &#8220;geplant&#8221; setzen.
In <a class="reference external" href="http://faggio.lino-framework.org/index.html#faggio" title="(in Lino Faggio Reference v0.0)"><span>Lino Faggio</span></a> brauchen wir den Eventstates.scheduled eigentlich
nicht. geht direkt von draft nach took_place oder cancelled.</li>
<li>Buchhaltung : Kassen- und Kontoauszüge erfassen, Mahnungen schreiben</li>
<li>Ein Button, um alle zu erstellenden Rechnungen auf einen Klick zu
generieren.</li>
<li>Was ist mit &#8220;Test-Karten&#8221; bzw. &#8220;Schupperstunden&#8221;?</li>
<li>Was ist mit Späteinsteigern? Haben die ersten Stunden verpasst
und zahlen deshalb weniger.</li>
<li>Invoices to create : quick search doesn&#8217;t work</li>
<li>Kann man mit Lino ein einfaches Mailing  verschicken?
Angebot Jahreskarten.</li>
</ul>
</div>
<div class="section" id="the-eid-info-field">
<h2>The <cite>eid_info</cite> field<a class="headerlink" href="#the-eid-info-field" title="Permalink to this headline">¶</a></h2>
<p>Replaced <cite>eid_panel</cite> in <cite>pcsw.ClientDetail</cite> by <cite>eid_info</cite>.
Optimizations and German translations.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0829.html" title="20130829 (Thursday, 29 August 2013)"
             >next</a> |</li>
        <li class="right" >
          <a href="0827.html" title="20130827 (Tuesday, 27 August 2013)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2013</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2013/0828.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2013/0828.html">Online Link</a>
    </div>
  </body>
</html>