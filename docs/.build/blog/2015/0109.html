<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Friday, January 9, 2015 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2015" href="index.html" />
    <link rel="next" title="Saturday, January 10, 2015" href="0110.html" />
    <link rel="prev" title="Thursday, January 8, 2015" href="0108.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0110.html" title="Saturday, January 10, 2015"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0108.html" title="Thursday, January 8, 2015"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2015</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="friday-january-9-2015">
<h1>Friday, January 9, 2015<a class="headerlink" href="#friday-january-9-2015" title="Permalink to this headline">¶</a></h1>
<div class="section" id="benutzerprofil-newcomers-ubersetzen-nach-erstempfang">
<h2>Benutzerprofil &#8220;Newcomers&#8221; übersetzen nach &#8220;Erstempfang&#8221;<a class="headerlink" href="#benutzerprofil-newcomers-ubersetzen-nach-erstempfang" title="Permalink to this headline">¶</a></h2>
<p>The following fixes <a class="reference external" href="http://trac.lino-framework.org/ticket/54">#54</a>.</p>
<p>The German translation of the label of the user group &#8220;newcomers&#8221; is
now &#8220;Erstempfang&#8221; (instead of
&#8220;Neuanträge&#8221;).
<a class="reference external" href="http://welfare.lino-framework.org/api/lino_welfare.modlib.newcomers.html#module-lino_welfare.modlib.newcomers" title="(in Lino Welfare Reference Manual v1.1)"><code class="xref py py-mod docutils literal"><span class="pre">lino_welfare.modlib.newcomers</span></code></a>
now has an <a class="reference external" href="http://www.lino-framework.org/ref/files.html#xfile-__init__.py" title="(in Lino v1.6)"><code class="xref std std-xfile docutils literal"><span class="pre">__init__.py</span></code></a>.
Moved some documentation of <a class="reference external" href="http://welfare.lino-framework.org/api/lino_welfare.modlib.isip.html#module-lino_welfare.modlib.isip" title="(in Lino Welfare Reference Manual v1.1)"><code class="xref py py-mod docutils literal"><span class="pre">lino_welfare.modlib.isip</span></code></a> into the module.</p>
</div>
<div class="section" id="termin-erstellen-fur-klient-ohne-begleitung">
<h2>Termin erstellen für Klient ohne Begleitung<a class="headerlink" href="#termin-erstellen-fur-klient-ohne-begleitung" title="Permalink to this headline">¶</a></h2>
<p>Working for <a class="reference external" href="http://trac.lino-framework.org/ticket/55">#55</a></p>
<p>The <a class="reference external" href="http://welfare.lino-framework.org/api/lino_welfare.modlib.reception.models.html#lino_welfare.modlib.reception.models.CreateClientVisit" title="(in Lino Welfare Reference Manual v1.1)"><code class="xref py py-class docutils literal"><span class="pre">CreateClientVisit</span></code></a> action was
being used only in <a class="reference external" href="http://welfare.lino-framework.org/api/lino_welfare.modlib.reception.models.html#lino_welfare.modlib.reception.models.Clients" title="(in Lino Welfare Reference Manual v1.1)"><code class="xref py py-class docutils literal"><span class="pre">reception.Clients</span></code></a>, now it is injected to
the <cite>pcsw.Client</cite> model (available on every Client table).</p>
<p>It now has a <cite>user_choices</cite> method which currently shows only active
users (non-empty profile). This revealed a bug: defining a chooser on
an action could cause a server-side error message
<code class="docutils literal"><span class="pre">AttributeError:</span> <span class="pre">'CreateClientVisit'</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span>
<span class="pre">'known_values'</span></code>.  Added a test to <cite>tests.test_welfare_demo</cite> which
reproduces this error.  Fixed the error by adding <cite>known_values =
None</cite> to <a class="reference external" href="http://www.lino-framework.org/api/lino.core.utils.html#lino.core.utils.Parametrizable" title="(in Lino v1.6)"><code class="xref py py-class docutils literal"><span class="pre">lino.core.utils.Parametrizable</span></code></a>.</p>
<p>I wrote two actions on Client which are supposed to open the calendar
panel, for a user to be selected manually.  When creating an
appointment in that panel, the Client would automatically be set.</p>
<p>One (<cite>find_date_dlg</cite>) is a dialog action where the agent is selected
in a combobox.  But it seems that this combination (dialog action with
JS instead of AJAX call) is not yet possible. So this version is
currently ifed out.  But we might change the False to True because
looking at it helps to imagine how it would look and whether it&#8217;s
worth to make it possible.</p>
<p>The other implementation (<cite>find_date</cite>) uses a ButtonsTable. It has the
advantage that it works. And in fact I think it is easier to use
because you just click once on the name. Instead of selecting it from
a combobox and then click &#8220;Submit&#8221;.  I am not sure whether this is
still true when there are 30 or 50 users. But we will see.</p>
<p>TODO: after creating an appointment, the client is not automatically
added as a Guest to that appointment.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0110.html" title="Saturday, January 10, 2015"
             >next</a> |</li>
        <li class="right" >
          <a href="0108.html" title="Thursday, January 8, 2015"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2015</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2015/0109.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2015/0109.html">Online Link</a>
    </div>
  </body>
</html>