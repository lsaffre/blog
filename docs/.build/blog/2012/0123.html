<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20120123 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2012" href="index.html" />
    <link rel="next" title="20120124" href="0124.html" />
    <link rel="prev" title="20120122" href="0122.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0124.html" title="20120124"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0122.html" title="20120122"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2012</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20120123<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Fehlerjagd vor dem Release.</p>
<ul>
<li><p class="first">Der <span class="guilabel">[Upload]</span>-Button von
<code class="xref py py-meth docutils literal"><span class="pre">quick_upload_buttons</span></code>
enthielt fehlerhaften Code:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;a href=&#39;javascript:Lino.uploads.UploadsByOwner.insert({ &quot;base_params&quot;: { &quot;mt&quot;: 18, &quot;type&quot;: 2, &quot;mk&quot;: 200007 } },{ &quot;data_record&quot;: { &quot;phantom&quot;: true, &quot;data&quot;: { &quot;valid_until&quot;: null, &quot;description&quot;: &quot;&quot;, &quot;created&quot;: null, &quot;userHidden&quot;: 200067, &quot;modified&quot;: null, &quot;typeHidden&quot;: 2, &quot;user&quot;: &quot;lsaffre&quot;, &quot;file&quot;: &quot;&quot;, &quot;owner&quot;: &quot;&lt;a href=\&quot;javascript:Lino.dsbe.AllPersons.detail(undefined,{},{record_id:200007})\&quot;&gt;MUSTERMANN Max (200007)&lt;/a&gt;&quot;, &quot;type&quot;: &quot;Aufenthaltserlaubnis&quot;, &quot;id&quot;: null }, &quot;title&quot;: &quot;Uploads von MUSTERMANN Max (200007)&quot; } })&#39;&gt;Upload&lt;/a&gt;
</pre></div>
</div>
<p>Der erste Parameter, <cite>caller</cite> fehlte.
Außerdem habe ich Ticket <a class="reference external" href="https://github.com/lsaffre/lino/blob/master/docs/tickets/56">docs/tickets/56</a> eröffnet.</p>
</li>
<li><p class="first">Beim Ausdruck der <cite>contacts/Person/eid-content.odt</cite>
(eID-Inhalt) kamen zwei Fehler:</p>
<ul class="simple">
<li>&#8220;Error while evaluating expression &#8220;self.card_type_text()&#8221;.
card_type_text() takes exactly 2 arguments (1 given)&#8221;
&#8211;&gt; <code class="docutils literal"><span class="pre">self.card_type_text()</span></code> wurde ersetzt durch <code class="docutils literal"><span class="pre">self.card_type</span></code>.</li>
<li>Error while evaluating expression &#8220;self.sex&#8221;. &#8216;Person&#8217; object has no attribute &#8216;sex&#8217;</li>
</ul>
<p>Person.card_type ist jetzt auch endlich eine ChoiceList namens
<code class="xref py py-class docutils literal"><span class="pre">lino.apps.dsbe.models.BeIdCardTypes</span></code>.
Folglich müssen diese Texte nun auch via poEdit übersetzt werden.</p>
</li>
<li><p class="first">Der Trick mit dem base_queryset, das in der Tabelle gespeichert
wird, scheint nun ein Caching-Problem hervorzurufen.
War einfach reproduzierbar,
indem ich in einer Listenansicht einen Record erstellte. Anschließend wurde
dieser Record erst nach einem Server-Neustart sichtbar.
Seltsam, dass das nicht schon immer so war.
Ich deaktiviere das ganze System, zumal ich nie nachgeprüft habe,
ob das überhaupt was bringt.
Kann auch sein, dass es bisher nur deshalb
keinen Schaden anrichtete, weil es gar nicht funktionierte...</p>
</li>
<li><p class="first">CalendarPanel machte &#8220;Uncaught TypeError: Cannot call method &#8216;getTime&#8217; of null&#8221;.
restful_view schickt jetzt für ein GET der Liste niemals einen Phantom-Record
mit.</p>
</li>
<li><p class="first">New utility class <code class="xref py py-class docutils literal"><span class="pre">lino.utils.Cycler</span></code> used
in <code class="xref py py-mod docutils literal"><span class="pre">lino.apps.dsbe.fixtures.demo</span></code>.</p>
</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">lino.tools.resolve_field()</span></code> now returns an <code class="xref py py-class docutils literal"><span class="pre">lino.tools.UnresolvedField</span></code></p>
</li>
<li><p class="first">Die Aktion <code class="xref py py-class docutils literal"><span class="pre">Eintragen</span></code>
in der Tabelle der <code class="xref py py-class docutils literal"><span class="pre">Kandidaten</span> <span class="pre">pro</span> <span class="pre">Kurs</span></code>
machte kein Refresh des Fensters. Das waren zwei Stunden Arbeit mit
<cite>containing_window</cite> und <cite>containing_panel</cite>.</p>
</li>
<li><p class="first">Einige Übersetzungen der labels von .dtl-Dateien waren verschwunden.
Kann sein, dass ich die .dtl.py-Dateien irgendwann mal gelöscht hatte und
<cite>make appdocs</cite> vor dem letzten <cite>make mm</cite> nicht habe laufen lassen.</p>
</li>
<li><p class="first">Und <cite>make appdocs</cite> funktionierte übrigens nicht:</p>
<div class="highlight-python"><div class="highlight"><pre>File &quot;t:\hgwork\lino\lino\apps\dsbe\models.py&quot;, line 1107, in setup_columns
  for pg in PersonGroup.objects.filter(ref_name__isnull=False).order_by(&#39;ref_name&#39;):
...
django.db.utils.DatabaseError: no such table: dsbe_persongroup
</pre></div>
</div>
</li>
<li><p class="first">Das Detail-Fenster von User holte sich jetzt auch die .dtl-Dateien von Person.
Das kam, weil <code class="xref py py-class docutils literal"><span class="pre">lino.modlib.contacts.models.PersonMixin</span></code>
nur <cite>Person</cite> hieß.</p>
</li>
</ul>
<p>Und dann habe ich in letzter Minute noch mögliche Performance-Probleme festgestellt.
Schade! Aber es ist jetzt 23.30 Uhr, ich habe 8 Stunden intensive Fehlerjagd hinter mir...
jetzt gehe ich erstmal schlafen, und morgen schaue ich mir die Sachen genauer an.</p>
<p>TODO: Lino.FormPanel sollte sein loadMask aktivieren (Meldung &#8220;Bitte warten&#8221;),
wenn er speichert. Das ist nämlich vor allem bei aktiven Feldern
(z.B. Eingabe einer Art60-7-Konvention) lästig.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0124.html" title="20120124"
             >next</a> |</li>
        <li class="right" >
          <a href="0122.html" title="20120122"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2012</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2015 Luc Saffre.
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
    <a href="https://raw.github.com/lsaffre/blog/master/docs/blog/2012/0123.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://luc.lino-framework.org/blog/2012/0123.html">Online Link</a>
    </div>
  </body>
</html>