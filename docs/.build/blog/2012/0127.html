<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20120127 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2012" href="index.html" />
    <link rel="next" title="20120128" href="0128.html" />
    <link rel="prev" title="20120126" href="0126.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="0128.html" title="20120128"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0126.html" title="20120126"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2012</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20120127<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="window-management">
<h2>Window management<a class="headerlink" href="#window-management" title="Permalink to this headline">¶</a></h2>
<p>Mir ist über Nacht klargeworden, dass im
<a class="reference external" href="http://www.lino-framework.org/tickets/58.html">neuen Windowing-System</a>
noch ein Denkfehler war:
Nachtrag &#8220;window_history&#8221; zur <a class="reference external" href="http://www.lino-framework.org/releases/1.3.6.html">/releases/1.3.6</a>:</p>
<p><cite>Lino.current_window</cite> holds the current window.</p>
<p>Lino.window_history is a stack (an Array) of windows that have been hidden
but are still &#8220;active&#8221;. Each item is an object with two attributes
<cite>window</cite> and <cite>status</cite>.</p>
<p>Lino.open_window(win,status) : pushes the current window and its status to the stack,
then shows the new window and activates the given status.</p>
<p>Lino.close_window(update_status) : closes the current window,
pops the last window from stack and restores it&#8217;s saved status.
If update_status is given, this means &#8220;update the stored status
of previous window with some new values&#8221;.
This is used after a SubmitInsert.</p>
</div>
<div class="section" id="complicated-names">
<h2>Complicated names<a class="headerlink" href="#complicated-names" title="Permalink to this headline">¶</a></h2>
<p>We had a case where <code class="xref py py-func docutils literal"><span class="pre">lino.modlib.contacts.utils.name2kw()</span></code>
failed to correctly split a name into first_name and last_name.
<cite>name2kw</cite> now supports a comma to handle complicated cases.</p>
</div>
<div class="section" id="noch-bugs-im-windows-management">
<h2>Noch Bugs im windows management<a class="headerlink" href="#noch-bugs-im-windows-management" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Lino.fk_renderer (Anklickbare Werte in einer Grid) funktionierte nicht.</li>
<li>Das mit dem update_status nach einem SubmitInsert musste
ich noch verfeinern. Wenn man z.B. im Detail einer Person Nr. 123
in NotesByPerson doppelklickte und eine Notiz Nr 14 erstellte,
suchte er nach dem Speichern des Fensters eine Person Nr. 14.</li>
</ul>
</div>
<div class="section" id="virtualfields-in-grid-views">
<h2>VirtualFields in Grid Views<a class="headerlink" href="#virtualfields-in-grid-views" title="Permalink to this headline">¶</a></h2>
<p>I discovered that by mistake all VirtualFields were
considered wildcard data elements.
New testcase <code class="xref py py-func docutils literal"><span class="pre">lino.apps.pcsw.tests.pcsw_tests.test07()</span></code>
to avoid this infuture releases.</p>
</div>
<div class="section" id="py2xml-on-iterables">
<h2>py2xml() on iterables<a class="headerlink" href="#py2xml-on-iterables" title="Permalink to this headline">¶</a></h2>
<p>Wow! Beim Optimieren der Ausgabe von [html] war mir aufgefallen,
dass xmlgen es bisher erforderte, dass die ganze Tabelle in eine DOM
geladen wird, bevor sie gerendert werden kann. Und das habe ich nun
(wahrscheinlich) elegant gelöst, indem man als <cite>value</cite> eine
Generator-Funktion angibt.</p>
<p>Man bedenke, dass der <cite>[html]</cite>-Button bewusst
eine Tabelle mit <em>allen</em> Zeilen generiert, weil es ja
eben eine druckbare Seite sein soll, ohne Navigator-Buttons,
die der Browser je nach Druckeinstellungen selber paginieren
soll.</p>
<p>Tests auf Jana mit einer Liste von 7825 Personen.
Der Request
<a class="reference external" href="http://jana/api/pcsw/Persons?fmt=printer">http://jana/api/pcsw/Persons?fmt=printer</a>
dauert ca. 5 Minuten.</p>
<p><em>Vor</em> dieser Änderung ging dem Server die Luft aus
(memory exhausted), als ich die gleiche Seite ein zweites Mal anforderte.</p>
<p><em>Nach</em> dieser Änderung ging ihm immerhin nicht mehr die Luft aus.
Hier der Output von Top nach zweimaligem Request</p>
<div class="highlight-python"><div class="highlight"><pre> PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
2016 root      18   0 10716 3888 2020 S  0.0  0.2   0:00.17 apache2
2023 www-data  25   0  436m 283m 4076 S  0.0 18.5   5:34.01 apache2
2029 www-data  25   0  428m 276m 4068 S  0.0 18.0   5:06.28 apache2
2030 www-data  15   0 12228 5812 2332 S  0.0  0.4   0:29.16 apache2
</pre></div>
</div>
<p>Es gibt zwei Prozesse, die einkommende Requests abwechselnd beantworten</p>
<p>Nach viermaligem Request hat sichdie Situation stabilisiert:</p>
<div class="highlight-python"><div class="highlight"><pre> PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
3211 www-data  25   0  470m 318m 4072 S  0.0 20.7  10:43.11 apache2
3212 www-data  25   0  462m 310m 4068 S  0.0 20.2  10:15.31 apache2
</pre></div>
</div>
<p>Dennoch: bis auf weiteres setze ich mal eine Obergrenze von 300
Zeilen. Wenn die überschritten wird, kommt eine letzte Zeile
&#8220;List truncated after 300 rows&#8221;.
Mal sehen, wann das jemandem auffällt.</p>
</div>
<div class="section" id="ubersetzungen">
<h2>Übersetzungen<a class="headerlink" href="#ubersetzungen" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>&#8220;Primary Clients&#8221; &#8211;&gt; &#8220;Komplette Akten&#8221; statt &#8220;Komplette Klienten&#8221;</li>
<li><code class="xref py py-class docutils literal"><span class="pre">lino.modlib.jobs.models.JobProvider</span></code> sind
keine &#8220;Employer&#8221; (&#8220;Arbeitgeber&#8221;).
Also &#8220;Arbeitgeber&#8221; &#8211;&gt; &#8220;Stellenanbieter&#8221;</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="0128.html" title="20120128"
             >next</a> |</li>
        <li class="right" >
          <a href="0126.html" title="20120126"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2012</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2012/0127.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2012/0127.html">Online Link</a>
    </div>
  </body>
</html>