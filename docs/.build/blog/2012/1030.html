<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20121030 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2012" href="index.html" />
    <link rel="next" title="20121102" href="1102.html" />
    <link rel="prev" title="20121029" href="1029.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1102.html" title="20121102"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1029.html" title="20121029"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2012</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20121030<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-releasing-mode">
<h2>The &#8220;releasing mode&#8221;<a class="headerlink" href="#the-releasing-mode" title="Permalink to this headline">¶</a></h2>
<p>Lino-Welfare 1.0 and Lino 1.5.0 are almost released:
they have started their service on a production site.</p>
<p>Before doing the official release we remain in &#8220;releasing
mode&#8221;: the production site is running on the development
version so that we can add quick bugfixes without having
to release each of them.
Since there is currently only one production user,
the &#8220;releasing mode&#8221; can remain active until
we need a database migration.</p>
<p>A first such bugfix is the following:</p>
<div class="highlight-python"><div class="highlight"><pre>Traceback (most recent call last):
  File &quot;t:\hgwork\welfare\lino_welfare\modlib\pcsw\management\commands\watch_tim.py&quot;, line 828, in watch
    process_line(i,ln)
  File &quot;t:\hgwork\welfare\lino_welfare\modlib\pcsw\management\commands\watch_tim.py&quot;, line 801, in process_line
    m(**kw)
  File &quot;t:\hgwork\welfare\lino_welfare\modlib\pcsw\management\commands\watch_tim.py&quot;, line 419, in PUT
    self.applydata(obj,kw[&#39;data&#39;])
  File &quot;t:\hgwork\welfare\lino_welfare\modlib\pcsw\management\commands\watch_tim.py&quot;, line 689, in applydata
    pxs2client(data,obj)
  File &quot;t:\hgwork\welfare\lino_welfare\modlib\pcsw\management\commands\watch_tim.py&quot;, line 183, in pxs2client
    person.card_type = pcsw.BeIdCardType.blank_item
AttributeError: type object &#39;BeIdCardType&#39; has no attribute &#39;blank_item&#39;
</pre></div>
</div>
<p>Another bug, also in watch_tim, was:</p>
<blockquote>
<div>Cannot resolve keyword &#8216;type_id&#8217; into field. Choices are: client, company, contact_person, contact_role, id, remark, type</div></blockquote>
</div>
<div class="section" id="fixed-a-bug-in-lino-management-commands-run">
<h2>Fixed a bug in <a class="reference external" href="http://www.lino-framework.org/api/lino.management.commands.run.html#module-lino.management.commands.run" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.management.commands.run</span></code></a><a class="headerlink" href="#fixed-a-bug-in-lino-management-commands-run" title="Permalink to this headline">¶</a></h2>
<p>And a third bug, in <a class="reference external" href="http://www.lino-framework.org/api/lino.management.commands.run.html#module-lino.management.commands.run" title="(in Lino v1.6)"><code class="xref py py-mod docutils literal"><span class="pre">lino.management.commands.run</span></code></a>, was
If I tried to run the following file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">&quot;f1&quot;</span>

<span class="k">def</span> <span class="nf">f2</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">f1</span><span class="p">()</span>

<span class="k">print</span> <span class="n">f2</span><span class="p">()</span>
</pre></div>
</div>
<p>then I got:</p>
<div class="highlight-python"><div class="highlight"><pre>Traceback (most recent call last):
  File &quot;manage.py&quot;, line 12, in &lt;module&gt;
    execute_manager(settings)
  File &quot;l:\snapshots\django\django\core\management\__init__.py&quot;, line 458, in execute_manager
    utility.execute()
  File &quot;l:\snapshots\django\django\core\management\__init__.py&quot;, line 381, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File &quot;l:\snapshots\django\django\core\management\base.py&quot;, line 195, in run_from_argv
    self.execute(*args, **options.__dict__)
  File &quot;l:\snapshots\django\django\core\management\base.py&quot;, line 231, in execute
    output = self.handle(*args, **options)
  File &quot;t:\hgwork\lino\lino\management\commands\run.py&quot;, line 61, in handle
    execfile(fn)
  File &quot;tt.py&quot;, line 8, in &lt;module&gt;
    print f2()
  File &quot;tt.py&quot;, line 5, in f2
    return f1()
NameError: global name &#39;f1&#39; is not defined
</pre></div>
</div>
<p>It has to do with Python
<a class="reference external" href="http://docs.python.org/2.7/library/functions.html?highlight=execfile#execfile">execfile</a> function.
I din&#8217;t understand in-deep, but
the solution was to change:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">execfile</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
</pre></div>
</div>
<p>into:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">execfile</span><span class="p">(</span><span class="n">fn</span><span class="p">,{})</span>
</pre></div>
</div>
</div>
<div class="section" id="miscellaneous-bugfixes">
<h2>Miscellaneous bugfixes<a class="headerlink" href="#miscellaneous-bugfixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>JS failure when <code class="xref py py-attr docutils literal"><span class="pre">lino.Lino.use_quicktips</span></code> was False.</li>
<li>Startup failure when <code class="xref py py-attr docutils literal"><span class="pre">lino.Lino.build_js_cache_on_startup</span></code></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1102.html" title="20121102"
             >next</a> |</li>
        <li class="right" >
          <a href="1029.html" title="20121029"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2012</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2012/1030.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2012/1030.html">Online Link</a>
    </div>
  </body>
</html>