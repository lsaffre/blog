<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20121025 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2012" href="index.html" />
    <link rel="next" title="20121026" href="1026.html" />
    <link rel="prev" title="20121024" href="1024.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1026.html" title="20121026"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1024.html" title="20121024"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2012</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20121025<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>TODO:</p>
<ul class="simple">
<li>Nicht &#8220;Status&#8221; und nicht &#8220;Aktenzustand&#8221;, sondern &#8220;Bearbeitungszustand&#8221;.</li>
<li>&#8220;Komplette Akte&#8221; ersetzen durch &#8220;primäre Begleitung&#8221;</li>
<li>In &#8220;Neue Klienten&#8221; steht noch &#8220;Altfälle&#8221;</li>
<li>warum wurde kein Chronik-Eintrag erstellt bei aliber (23132)?</li>
</ul>
<p>DONE:</p>
<ul>
<li><p class="first">workflow Klienten: Ehemalig -&gt; Neuantrag</p>
</li>
<li><p class="first">Im Insert-Fenster gibt es ja jetzt zwei Buttons
&#8220;Erstellen&#8221; und &#8220;Erstellen und Bearbeiten&#8221;.
Sehr unklar. Zumindest bessere Bezeichnungen:</p>
<p>&#8220;Erstellen und Speichern&#8221; / &#8220;Erstellen und Bearbeiten&#8221;</p>
</li>
<li><p class="first">&#8220;Im Schnellsuche-Feld braucht man
jetzt nicht mehr TAB zu drücken, um die Suche zu starten.&#8221;
Von wegen &#8220;Arbeitsaufwand 30 Minuten&#8221;:
Es war doch recht störend, dass das Feld dann
auch den Tastaturfokus verlor.
Zwei weitere halbe Stunden.</p>
</li>
<li><p class="first">Auch [Parameters] hat jetzt ein Icon und einen tooltip</p>
</li>
<li><p class="first">Reihenfolge Aktionen: Insert kommt jetzt an erster Stelle
(<a class="reference external" href="http://www.lino-framework.org/api/lino.core.actions.html#lino.core.actions.Action.sort_index" title="(in Lino v1.6)"><code class="xref py py-attr docutils literal"><span class="pre">sort_index</span></code></a> 10),
noch vor Detail, weil die ja fast noch eher eine Listenaktion
als eine RowAction ist.</p>
</li>
<li><p class="first">Icon für outbox.Mail.send, postings.Posting.print</p>
</li>
<li><p class="first"><a class="reference external" href="http://welfare.lino-framework.org/api/lino_welfare.modlib.newcomers.models.html#lino_welfare.modlib.newcomers.models.AvailableCoachesByClient" title="(in Lino Welfare Reference Manual v1.1)"><code class="xref py py-class docutils literal"><span class="pre">lino_welfare.modlib.newcomers.models.AvailableCoachesByClient</span></code></a>:
Feld &#8220;Quote&#8221; ersetzt durch &#8220;Belastung&#8221; (&#8220;Workload&#8221;).
Und die Liste ist jetzt nach diesem Wert sortiert:
der am wenigsten belastete verfügbare Begleiter steht zuerst.</p>
</li>
<li><p class="first">Neues Attribut
<code class="xref py py-attr docutils literal"><span class="pre">lino.core.actors.Actor.hide_sums</span></code> wird benutzt in
AvailableCoachesByClient,
die jetzt auch <code class="xref py py-attr docutils literal"><span class="pre">lino.core.actors.Actor.slave_grid_format</span></code>
auf <cite>html</cite> hat.</p>
</li>
</ul>
<div class="section" id="ein-cooler-bug">
<h2>Ein cooler Bug<a class="headerlink" href="#ein-cooler-bug" title="Permalink to this headline">¶</a></h2>
<p>Weil AvailableCoachesByClient jetzt mit
<code class="xref py py-attr docutils literal"><span class="pre">slave_grid_format</span></code> <cite>html</cite>
angezeigt wird, kam ein weiterer subtiler Bug zum Vorschein.
Symptom war: :menuselection`Kontakte &#8211;&gt; Klienten` und
dann Doppelklick oder Enter. Dann kam auf dem Server:</p>
<div class="highlight-python"><div class="highlight"><pre>Exception
Expected a list of 2 values, but got [u&#39;&#39;, u&#39;&#39;, u&#39;&#39;, u&#39;false&#39;, u&#39;&#39;, u&#39;&#39;, u&#39;&#39;, u&#39;false&#39;, u&#39;&#39;]

TRACEBACK:
  File &quot;l:\snapshots\django\django\core\handlers\base.py&quot;, line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File &quot;l:\snapshots\django\django\views\generic\base.py&quot;, line 58, in view
    return self.dispatch(request, *args, **kwargs)

  File &quot;l:\snapshots\django\django\views\generic\base.py&quot;, line 79, in dispatch
    return handler(request, *args, **kwargs)

  File &quot;t:\hgwork\lino\lino\ui\extjs3\views.py&quot;, line 723, in get
    datarec = elem2rec_detailed(ar,elem)

  File &quot;t:\hgwork\lino\lino\ui\extjs3\views.py&quot;, line 170, in elem2rec_detailed
    rec = elem2rec1(ar,rh,elem,**rec)

  File &quot;t:\hgwork\lino\lino\ui\extjs3\views.py&quot;, line 122, in elem2rec1
    rec.update(data=rh.store.row2dict(ar,elem))

  File &quot;t:\hgwork\lino\lino\ui\extjs3\ext_store.py&quot;, line 1248, in row2dict
    v = fld.full_value_from_object(row,ar)

  File &quot;t:\hgwork\lino\lino\ui\extjs3\ext_store.py&quot;, line 783, in full_value_from_object
    return unbound_meth(obj,request)

  File &quot;t:\hgwork\lino\lino\core\tables.py&quot;, line 892, in meth
    master_instance=master)

  File &quot;t:\hgwork\lino\lino\core\dbtables.py&quot;, line 473, in request
    return TableRequest(ui,self,request,action,**kw)

  File &quot;t:\hgwork\lino\lino\core\tables.py&quot;, line 169, in __init__
    actions.ActionRequest.__init__(self,ui,actor,request,action,**kw)

  File &quot;t:\hgwork\lino\lino\core\actions.py&quot;, line 962, in __init__
    pv.update(self.actor.params_layout.params_store.parse_params(request))

  File &quot;t:\hgwork\lino\lino\ui\extjs3\ext_store.py&quot;, line 997, in parse_params
    raise Exception(&quot;Expected a list of %d values, but got %s&quot; % (len(self.param_fields),pv))
</pre></div>
</div>
<p>Erklärung: weil die AvailableCoachesByClient außerdem
<a class="reference external" href="http://www.lino-framework.org/api/lino.core.actors.html#lino.core.actors.Actor.parameters" title="(in Lino v1.6)"><code class="xref py py-attr docutils literal"><span class="pre">parameters</span></code></a>
hat, versuchte sie in diesem Fall, die Parameterwerte
aus dem ActionRequest rauszuholen.
Die Master Tabelle hat deren auch. Aber die sind ja für
den Master und nicht für den Slave gedacht.
Wenn eine parametrierte Slave-Tabelle im Detail eines Masters angezeigt wird,
muss sie dies mit den Default-Serte ihrer Parameter tun.
Implementierung:
<a class="reference external" href="http://www.lino-framework.org/api/lino.core.actors.html#lino.core.actors.Actor.slave_as_html_meth" title="(in Lino v1.6)"><code class="xref py py-meth docutils literal"><span class="pre">slave_as_html_meth</span></code></a>
gibt jetzt immer einen expliziten <cite>param_values={}</cite> mit,
und <code class="xref py py-class docutils literal"><span class="pre">ActionRequest</span></code> meckert jetzt nicht mehr falls die Tabelle
keine Parameter hat (&#8220;Cannot request param_values on &#8221;) <em>und</em>
parst den <cite>request</cite> für Parameterwerte jetzt nur noch, wenn dieses
<cite>param_values</cite> None ist.</p>
<p>Noch was Neues:
Slave-Tabellen im
<code class="xref py py-attr docutils literal"><span class="pre">slave_grid_format</span></code>
<cite>html</cite>
zeigen jetzt den <cite>no_data_text</cite> korrekt an.</p>
<p>Danach habe ich das
<code class="xref py py-attr docutils literal"><span class="pre">slave_grid_format</span></code>
<cite>html</cite>
der Tabelle &#8220;Verfügbare Benutzer&#8221; allerdings doch wieder abgeschaltet,
weil es da noch ein anderes Problem gibt: die Aktionen (Zuweisen) werden im plain
html-Modus dann nicht korrekt gerendert.</p>
<p>Und noch ein Bug:</p>
<ul class="simple">
<li>Nach erfolgreicher Zuweisung eines Klienten springt er ohne viele Worte
auf den nächsten Klienten. Stattdessen alert_msg. Oder in die Grid zurück?</li>
</ul>
<p>Die Aktion war korrekt programmiert (dass sie eine abschließende Meldung in
einer alert-Box anzeigen soll), aber das Problem war, dass die Box nicht kam.
Das war ein trivialer Bug in <code class="xref py py-meth docutils literal"><span class="pre">lino.ui.base.UI.success_response()</span></code>.</p>
<p>Checkin wegen Feierabend.</p>
</div>
<div class="section" id="nachtsitzung">
<h2>Nachtsitzung<a class="headerlink" href="#nachtsitzung" title="Permalink to this headline">¶</a></h2>
<p>Ich war schon im Bett und wollte einschlafen, da kam Lino mit der Idee,
wie ich die eventuellen Fehlermeldungen &#8220;No handler soundo&#8221; abfangen kann,
die beim Ausdruck von manchen Tx25 möglicherweise kommen und von den Benutzern
dann nicht unbedingt gemeldet werden.</p>
<p>Also Optimierung des Fehlerreporting-Systems in solchen Fällen.
Was zu drei neuen Beispielen in meiner privaten Fehlersammlung führte
(privat, weil ich natürlich keine echten Resultate einer Tx25
ins Lino-Repository stellen darf):</p>
<ul class="simple">
<li>Tx25 # 74 : NameType instance has no attribute &#8216;FirstName&#8217;</li>
<li>Tx25 # 20 : No handler for Pseudonyms (Pseudonyms)</li>
<li>Tx25 # 4 : No handler for Aliases (Aliases)</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1026.html" title="20121026"
             >next</a> |</li>
        <li class="right" >
          <a href="1024.html" title="20121024"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2012</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2012/1025.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2012/1025.html">Online Link</a>
    </div>
  </body>
</html>