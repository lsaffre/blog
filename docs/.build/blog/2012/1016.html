<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20121016 &mdash; Luc&#39;s website</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/centeredlogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/taglist_tags.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Luc&#39;s website"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Luc&#39;s website" href="../../index.html" />
    <link rel="up" title="2012" href="index.html" />
    <link rel="next" title="20121017" href="1017.html" />
    <link rel="prev" title="20121015" href="1015.html" />
   
<script src="../../.htmldata/lightbox/js/jquery-1.11.0.min.js"></script>
<script src="../../.htmldata/lightbox/js/lightbox.min.js"></script>
<link href="../../.htmldata/lightbox/css/lightbox.css" rel="stylesheet" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1017.html" title="20121017"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1015.html" title="20121015"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">2012</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>20121016<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="endspurt">
<h2>Endspurt<a class="headerlink" href="#endspurt" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Wie/wo soll die &#8220;Begründung&#8221; (RefuseClient, EndCoaching, AssignCoach)
gespeichert werden?</li>
</ul>
<p>Antwort:
Dafür soll eine Notiz erstellt werden und nichts anderes.
Aber Notizen sind jetzt auch Controllable (kriegen ein neues Feld <cite>controller</cite>),
und wir kriegen eine neue Notion von &#8220;note broadcasting&#8221;.
Change.summary kann wieder raus.
Außerdem ein neuer Parameter <cite>SiteConfig.notifying_notetype</cite>.
Gemeinsame Basisklasse ist <cite>dd.NotifyingAction</cite>.</p>
<p><code class="xref py py-meth docutils literal"><span class="pre">lino.Lino.get_system_note_recipients()</span></code></p>
<ul>
<li><p class="first">Der Button für AssignCoach erscheint jetzt nur noch auf Kunden mit gültiger NISS.
(<cite>get_row_permission</cite> und <cite>get_bound_action_permission</cite> kriegen jetzt
nicht mehr nur den <cite>user</cite>, sondern den <cite>ar</cite>.</p>
</li>
<li><p class="first">Neue Warnung &#8220;Duplicate element definition only_primary = &#8216;only_primary&#8217;
in ParamsLayout on pcsw.IntegClients&#8221;.
Ich hatte nämlich mindestens eine halbe Stunde lang danach gesucht.</p>
<p>In CompanyDetail war auch ein doppeltes Element <cite>activity</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">intro_box</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">prefix name id language</span>
<span class="s">vat_id:12 activity:20 type:20 #hourly_rate</span>
<span class="s">activity bank_account1 bank_account2 is_deprecated</span>
<span class="s">&quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Wenn Root als Melanie arbeitet, dann konnte er in CoachingsByClient
dennoch nicht ein Coaching beenden.
Weil <cite>Lino.GridStore</cite> nicht <cite>Lino.insert_subst_user()</cite> machte.</p>
</li>
<li><p class="first">Button [Hilfetexte bearbeiten] funktionierte nicht.</p>
</li>
<li><p class="first">Gerd hatte eine gute Idee:</p>
<blockquote>
<div><p>Eine andere Sache, die vielleicht etwas &#8220;unergonomisch&#8221; ist: Ich war z.B.
auf dem Budget eines Klienten und wollte dort ein neues anlegen.
Instinktiv habe ich da auf den New-Button gedrückt und dann gesehen,
dass das ja - logischerweise - einen neuen Klienten erstellt.</p>
<p>Ist nur ein Schnellschuss, aber was hältst du davon, dass man die
Buttons immer im Kopf (Titelzeile) des jeweiligen Fensters unterbringt?
Dann könnte man sogar Knöpfe machen, wenn Fenster verschachtelt sind und
trotzdem wäre klar, welche Aktion zu welchem Fenster gehört. Doof?</p>
</div></blockquote>
<p>Die buttom toolbar ist jetzt leer,
bis auf den eventuellen Button [Hilfetexte bearbeiten]. Bin noch am überlegen,
wo ich den hintun soll. Wahrscheinlich am ehesten einen neuen Tool-Button.</p>
</li>
</ul>
<p>Checkin und Upgrade zwecks Besichtigung.</p>
</div>
<div class="section" id="nachwehe">
<h2>Nachwehe<a class="headerlink" href="#nachwehe" title="Permalink to this headline">¶</a></h2>
<p>Ein mysteriöser Fehler, den ich noch nicht verstanden habe:</p>
<div class="highlight-python"><div class="highlight"><pre>Exception
20121016 ActionParamsLayout on Begleitungsstadium : Begleitung beenden has no store

TRACEBACK:
  File &quot;/var/snapshots/django/django/core/handlers/base.py&quot;, line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File &quot;/var/snapshots/django/django/views/generic/base.py&quot;, line 47, in view
    return self.dispatch(request, *args, **kwargs)

  File &quot;/var/snapshots/django/django/views/generic/base.py&quot;, line 68, in dispatch
    return handler(request, *args, **kwargs)

  File &quot;/usr/local/django/test_dsbe/using/lino/lino/ui/extjs3/views.py&quot;, line 867, in get
    rows = [ rh.store.row2list(ar,row) for row in ar.sliced_data_iterator]

  File &quot;/usr/local/django/test_dsbe/using/lino/lino/ui/extjs3/ext_store.py&quot;, line 1222, in row2list
    v = fld.full_value_from_object(row,request)

  File &quot;/usr/local/django/test_dsbe/using/lino/lino/ui/extjs3/ext_store.py&quot;, line 376, in full_value_from_object
    return self.vf.value_from_object(obj,ar)

  File &quot;/usr/local/django/test_dsbe/using/lino/lino/core/fields.py&quot;, line 310, in value_from_object
    return m(obj,ar)

  File &quot;/usr/local/django/test_dsbe/using/lino/lino/core/model.py&quot;, line 301, in workflow_buttons
    l.append(ar.renderer.action_button(obj,ar,a))

  File &quot;/usr/local/django/test_dsbe/using/lino/lino/ui/extjs3/ext_ui.py&quot;, line 378, in action_button
    st = ar.get_action_status(a,obj)

  File &quot;/usr/local/django/test_dsbe/using/lino/lino/core/actions.py&quot;, line 1156, in get_action_status
    raise Exception(&quot;20121016 %s has no store&quot; % ba.action.params_layout)
</pre></div>
</div>
<p>Der kam daher, dass <cite>action.params_layout.params_store</cite>
einmalig beim Erzeugen einer LayoutHandle gemacht wird,
und dass die wiederum nur beim Generieren der <cite>lino*.js</cite> gebraucht
wird. Und unter mod_wsgi werden zwei parallele Threads gestartet,
von denen nur der erste (wenn überhaupt) eine <cite>lino*.js</cite> erzeugt.
Alle Requests, die vom anderen Thread bedient werden
(und diese Verteilung ist zufällig) kriegen potentiell diesen Fehler.</p>
</div>
<div class="section" id="besichtigung-1">
<h2>Besichtigung 1<a class="headerlink" href="#besichtigung-1" title="Permalink to this headline">¶</a></h2>
<p>Als Resultat der ersten Besichtigung außer der Nachwehe auch eine Erkenntnis:</p>
<p>Das Menü &#8220;ÖSHZ&#8221; war verwirrend. Weg damit.
<span class="menuselection">ÖSHZ ‣ Klienten</span> kommt nach <span class="menuselection">Kontakte ‣ Klienten</span>.
&#8220;Meine Begleitungen&#8221; und &#8220;Begleitungsvorschläge&#8221; raus,
stattdessen kommen neu zugewieene Coachings
jetzt immer direkt in den Status coached.
Auch &#8220;Begleitungsvorschläge&#8221; wird bis auf weiteres nicht benutzt.
Auch die CoachingStates &#8216;suggested&#8217; and &#8216;refused&#8217; werden rauskommentiert.</p>
<p>Workflow Kalender und Konfigurierung der &#8220;Systemnotizen&#8221;.
Wenn man eine Einladung ablehnt, kommt nun ebenfalls
ein Dialogfenster, wo man dem Autor des Termins den Grund mitteilen kann.
Falls der Termin einem Kunden zugewiesen ist, wird die Absage dann auch
als Systemnotiz vermerkt.
So oder so wird eine E-Mail verschickt (wenn denn alle Betroffenen
ihre Adresse eingetragen haben)</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About me</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lsaffre" target="_blank">GitHub</a>
<br/><a href="http://www.lino-framework.org" target="_blank">Lino</a>
<br/><a href="http://www.saffre-rumma.net" target="_blank">Rumma & Ko</a>
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1017.html" title="20121017"
             >next</a> |</li>
        <li class="right" >
          <a href="1015.html" title="20121015"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Blog</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >2012</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">

<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/2.5/88x31.png" /></a>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 Generic License</a>.<br />
      Last updated on 2015-03-31.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.
<a href="../../_sources/blog/2012/1016.txt">Show Source</a> 
    <a href="http://luc.lino-framework.org/blog/2012/1016.html">Online Link</a>
    </div>
  </body>
</html>